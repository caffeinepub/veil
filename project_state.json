{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 3,
  "summary": "Building a social app with emotional posting modes (HAPPY, CONFESS, BROKE) and a unified reaction system that uses empathetic text reactions instead of emojis or counts.",
  "architectural_notes": [
    "Reactions table: id, postId, userId, reactionText, createdAt — one reaction per user per post",
    "Reactions vary by emotionType (HAPPY/CONFESS/BROKE) with preset empathetic text options; no counts or animations shown publicly"
  ],
  "known_issues": [],
  "isFixRequest": false,
  "existing_features": [
    {
      "id": "feature-add-react-query-hooks-useaddreaction-mutation-and-usepostreactions-query-in-frontend-src-hooks-usequeries-ts-wired-to-the-new-backend-addreaction-and-getreactionsforpost-functions",
      "title": "Add React Query hooks `useAddReaction` (mutation) and `usePostReactions` (query) in `frontend/src/hooks/useQueries.ts` wired to the new backend `addReaction` and `getReactionsForPost` functions.",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-replace-the-existing-emoji-reaction-ui-in-publicpostcard-tsx-with-emotion-type-specific-text-reaction-buttons-no-emojis-no-counts-no-reaction-numbers-displayed-anywhere-show-only-the-reaction-text-options-as-soft-ui-buttons-the-available-reaction-texts-depend-on-the-post-s-emotiontype-happy-i-m-smiling-with-you-this-is-beautiful-you-deserve-this-so-happy-for-you-confess-i-see-you-that-took-courage-you-re-not-alone-in-this-thank-you-for-sharing-this-broke-i-m-holding-space-for-you-you-don-t-have-to-carry-this-alone-this-sounds-heavy-stay-we-re-here-if-the-current-user-has-already-reacted-to-the-post-show-their-chosen-reaction-text-highlighted-softly-no-count-post-owners-cannot-react-to-their-own-posts",
      "title": "Replace the existing emoji reaction UI in `PublicPostCard.tsx` with emotion-type-specific text reaction buttons. No emojis, no counts, no reaction numbers displayed anywhere. Show only the reaction text options as soft-UI buttons. The available reaction texts depend on the post's emotionType: HAPPY → ['I'm smiling with you.', 'This is beautiful.', 'You deserve this.', 'So happy for you.']; CONFESS → ['I see you.', 'That took courage.', 'You're not alone in this.', 'Thank you for sharing this.']; BROKE → ['I'm holding space for you.', 'You don't have to carry this alone.', 'This sounds heavy.', 'Stay. We're here.']. If the current user has already reacted to the post, show their chosen reaction text highlighted softly (no count). Post owners cannot react to their own posts.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Unified reaction system with emotion-type-specific text reactions (no emojis, no counts) and one reaction per user per post",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Add a `reactions` stable table to the backend with fields: id (Text), postId (Text), userId (Principal), reactionText (Text), createdAt (Int). Enforce one reaction per user per post — if a reaction already exists for that user+post pair, return an error. Expose `addReaction(postId: Text, reactionText: Text)` and `getReactionsForPost(postId: Text)` query functions. Do not expose reaction counts in any public-facing query.",
      "reqIds": [
        "REQ-1"
      ],
      "status": "pending"
    }
  ],
  "gameProjectType": "none",
  "projectName": "Veil",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}