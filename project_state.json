{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 51,
  "summary": "Veil is a private, invite-only emotional sharing platform capped at 100 members. It is pseudonymous, subscription-based, and human-moderated. Members share posts in three emotional states (Confess, Broke, Happy). Posts are private by default with user-controlled visibility. No DMs, comments, follower system, or feed ranking. Built with React frontend and Node.js/Express/MongoDB backend. The invite code requirement has been removed from the registration/login flow so users can sign up and log in without an invite code.",
  "architectural_notes": [
    "Stack: React (functional components) frontend, Node.js/Express backend, MongoDB, JWT authentication",
    "Subscription validation middleware required; region-based pricing logic (India vs Global)",
    "DB schema: Users (id, email, pseudonym, region, subscriptionStatus, subscriptionStartDate, inviteCode, createdAt, suspended), Posts (id, userId, emotionType, isPrivate, reactionCount, editable, createdAt), Reactions (id, postId, userId, reactionType, createdAt)",
    "No DMs, comments, replies, follower system, feed ranking, or AI moderation â€” ever",
    "UI must be calm/minimal: soft grayscale or muted pastel, no red alerts, no popularity badges, chronological order only"
  ],
  "known_issues": [
    "\"Admin not initialized\" error appearing on deployed app â€” admin principal constant or initialization logic in backend/main.mo may not be set correctly for the deployed canister identity",
    "RTS error: blob_of_principal: invalid principal â€” occurs during login/registration flow, likely caused by passing an invalid or empty principal string to a Principal-related Motoko function",
    "Invite code requirement removed from signup/login flow per user request â€” users can now register without an invite code"
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-build-the-invite-only-signup-screen-on-the-frontend-show-a-single-centered-form-with-invite-code-input-pseudonym-input-region-selector-india-global-on-submit-validate-invite-code-against-the-backend-create-the-account-and-route-to-the-dashboard-show-a-clear-error-if-the-invite-code-is-invalid-already-used-or-capacity-is-reached-no-email-or-real-name-field",
      "title": "Build the invite-only signup screen on the frontend. Show a single centered form with: invite code input, pseudonym input, region selector (India / Global). On submit, validate invite code against the backend, create the account, and route to the dashboard. Show a clear error if the invite code is invalid, already used, or capacity is reached. No email or real name field.",
      "reqIds": [
        "REQ-11"
      ],
      "version": 1
    },
    {
      "id": "feature-build-the-main-dashboard-screen-on-the-frontend-display-the-greeting-what-are-you-feeling-today-centered-on-screen-show-three-large-equally-spaced-softly-styled-emotion-buttons-confess-broke-happy-no-notification-badges-no-unread-counts-no-red-indicators-include-a-minimal-top-bar-showing-the-user-s-pseudonym-and-subscription-status-layout-must-be-spacious-with-generous-whitespace",
      "title": "Build the main dashboard screen on the frontend. Display the greeting 'What are you feeling today?' centered on screen. Show three large, equally-spaced, softly-styled emotion buttons: Confess, Broke, Happy. No notification badges, no unread counts, no red indicators. Include a minimal top bar showing the user's pseudonym and subscription status. Layout must be spacious with generous whitespace.",
      "reqIds": [
        "REQ-12"
      ],
      "version": 1
    },
    {
      "id": "feature-build-the-post-creation-screen-on-the-frontend-when-a-user-selects-an-emotion-show-the-emotion-title-a-large-textarea-a-live-word-counter-and-the-post-button-for-confess-and-happy-display-the-prompt-please-share-at-least-24-words-so-your-future-self-understands-this-moment-disable-the-post-button-and-show-a-validation-message-if-confess-happy-word-count-24-always-show-the-message-below-the-post-button-your-post-is-private-by-default-only-you-can-see-it-you-can-choose-to-make-it-public-after-posting-broke-shows-no-minimum-prompt",
      "title": "Build the post creation screen on the frontend. When a user selects an emotion, show: the emotion title, a large textarea, a live word counter, and the post button. For Confess and Happy, display the prompt: 'Please share at least 24 words so your future self understands this moment.' Disable the post button and show a validation message if Confess/Happy word count < 24. Always show the message below the post button: 'ðŸ”’ Your post is private by default. Only you can see it. You can choose to make it public after posting.' Broke shows no minimum prompt.",
      "reqIds": [
        "REQ-13"
      ],
      "version": 1
    },
    {
      "id": "feature-build-the-post-card-component-and-the-user-s-personal-post-list-on-the-frontend-each-card-displays-emotion-type-label-post-content-a-status-badge-private-public-reaction-count-visible-to-owner-only-an-edit-button-shown-only-if-editable-true-and-a-go-public-or-make-private-toggle-button-clicking-go-public-opens-a-confirmation-dialog-with-the-text-this-post-will-be-visible-to-all-veil-members-clicking-make-private-immediately-hides-it-from-the-community-without-a-dialog-the-personal-post-list-is-sorted-chronologically-newest-first",
      "title": "Build the post card component and the user's personal post list on the frontend. Each card displays: emotion type label, post content, a status badge (Private / Public), reaction count (visible to owner only), an Edit button (shown only if editable = true), and a 'Go Public' or 'Make Private' toggle button. Clicking 'Go Public' opens a confirmation dialog with the text: 'This post will be visible to all Veil members.' Clicking 'Make Private' immediately hides it from the community without a dialog. The personal post list is sorted chronologically (newest first).",
      "reqIds": [
        "REQ-14"
      ],
      "version": 1
    },
    {
      "id": "feature-build-the-community-public-feed-on-the-frontend-show-all-public-posts-from-all-members-sorted-strictly-chronologically-oldest-to-newest-or-newest-first-consistently-no-ranking-display-each-post-with-emotion-type-label-poster-s-pseudonym-content-reaction-count-and-reaction-buttons-support-care-strength-a-user-cannot-react-to-their-own-posts-show-the-user-s-existing-reaction-if-they-have-already-reacted-no-comments-section-no-reply-button-no-follower-count-no-popularity-indicators",
      "title": "Build the community public feed on the frontend. Show all public posts from all members sorted strictly chronologically (oldest to newest, or newest first consistently â€” no ranking). Display each post with: emotion type label, poster's pseudonym, content, reaction count, and reaction buttons (Support, Care, Strength). A user cannot react to their own posts. Show the user's existing reaction if they have already reacted. No comments section, no reply button, no follower count, no popularity indicators.",
      "reqIds": [
        "REQ-15"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-subscription-gating-on-the-frontend-when-a-user-s-subscription-is-expired-grace-period-ended-and-not-active-display-a-calm-non-alarming-banner-on-the-dashboard-and-post-creation-screen-explaining-they-cannot-create-posts-or-go-public-show-the-region-appropriate-pricing-150-month-for-india-9-month-for-global-do-not-use-red-colors-or-urgent-language-use-muted-supportive-tone-block-the-post-creation-form-submission-and-go-public-action-with-an-inline-message-rather-than-a-modal-interruption",
      "title": "Implement subscription gating on the frontend. When a user's subscription is expired (grace period ended and not active), display a calm, non-alarming banner on the dashboard and post creation screen explaining they cannot create posts or go public. Show the region-appropriate pricing: â‚¹150/month for India, $9/month for Global. Do not use red colors or urgent language â€” use muted, supportive tone. Block the post creation form submission and go-public action with an inline message rather than a modal interruption.",
      "reqIds": [
        "REQ-16"
      ],
      "version": 1
    },
    {
      "id": "feature-build-the-admin-moderation-dashboard-on-the-frontend-as-a-protected-route-accessible-only-to-the-admin-principal-include-tabs-or-sections-for-1-all-public-posts-chronological-list-with-delete-button-per-post-2-user-management-list-all-users-with-pseudonym-region-subscription-status-suspended-status-with-buttons-to-suspend-unsuspend-3-invite-codes-list-active-codes-add-new-codes-revoke-unused-codes-4-user-post-history-search-by-pseudonym-to-view-all-posts-by-that-user-no-ai-moderation-ui-all-actions-are-manual",
      "title": "Build the admin moderation dashboard on the frontend as a protected route accessible only to the admin principal. Include tabs or sections for: (1) All Public Posts â€” chronological list with delete button per post; (2) User Management â€” list all users with pseudonym, region, subscription status, suspended status, with buttons to suspend/unsuspend; (3) Invite Codes â€” list active codes, add new codes, revoke unused codes; (4) User Post History â€” search by pseudonym to view all posts by that user. No AI moderation UI. All actions are manual.",
      "reqIds": [
        "REQ-17"
      ],
      "version": 1
    },
    {
      "id": "feature-apply-a-calm-emotionally-safe-visual-design-system-consistently-across-all-screens-use-a-soft-warm-gray-and-muted-sage-dusty-rose-pastel-palette-typography-should-be-spacious-legible-and-unhurried-use-a-serif-or-humanist-sans-serif-with-generous-line-height-no-red-ui-elements-anywhere-no-bold-high-contrast-call-to-action-colors-generous-padding-and-whitespace-throughout-the-overall-feel-should-evoke-a-quiet-reflection-room-not-a-social-app-consistent-use-of-subtle-rounded-corners-and-low-contrast-borders",
      "title": "Apply a calm, emotionally safe visual design system consistently across all screens. Use a soft warm-gray and muted sage/dusty-rose pastel palette. Typography should be spacious, legible, and unhurried â€” use a serif or humanist sans-serif with generous line-height. No red UI elements anywhere. No bold/high-contrast call-to-action colors. Generous padding and whitespace throughout. The overall feel should evoke a quiet reflection room, not a social app. Consistent use of subtle rounded corners and low-contrast borders.",
      "reqIds": [
        "REQ-18"
      ],
      "version": 1
    },
    {
      "id": "feature-wire-all-frontend-pages-and-hooks-to-the-now-complete-backend-update-frontend-src-hooks-usequeries-ts-to-call-createpost-editpost-deletepost-setpostprivacy-addreaction-getmyreaction-getmyposts-getpublicposts-getmyprofile-and-isadmin-using-the-actor-from-useactor-ensure-mutation-hooks-invalidate-the-correct-query-keys-on-success-so-ui-stays-in-sync-without-manual-refresh",
      "title": "Wire all frontend pages and hooks to the now-complete backend. Update `frontend/src/hooks/useQueries.ts` to call createPost, editPost, deletePost, setPostPrivacy, addReaction, getMyReaction, getMyPosts, getPublicPosts, getMyProfile, and isAdmin using the actor from useActor. Ensure mutation hooks invalidate the correct query keys on success so UI stays in sync without manual refresh.",
      "reqIds": [
        "REQ-37"
      ],
      "version": 1
    },
    {
      "id": "feature-update-frontend-src-hooks-usequeries-ts-to-correctly-call-all-backend-functions-createpost-editpost-deletepost-setpostprivacy-addreaction-getmyreaction-getmyposts-getpublicposts-getmyprofile-and-isadmin-using-the-actor-from-useactor-ensure-all-mutation-hooks-invalidate-the-correct-react-query-cache-keys-on-success-so-the-ui-stays-in-sync-without-manual-page-refresh",
      "title": "Update frontend/src/hooks/useQueries.ts to correctly call all backend functions â€” createPost, editPost, deletePost, setPostPrivacy, addReaction, getMyReaction, getMyPosts, getPublicPosts, getMyProfile, and isAdmin â€” using the actor from useActor. Ensure all mutation hooks invalidate the correct React Query cache keys on success so the UI stays in sync without manual page refresh.",
      "reqIds": [
        "REQ-39"
      ],
      "version": 1
    },
    {
      "id": "feature-update-frontend-src-hooks-usequeries-ts-to-correctly-call-all-backend-functions-createpost-editpost-deletepost-setpostprivacy-addreaction-getmyreaction-getmyposts-getpublicposts-getmyprofile-isadmin-register-validateinvitecode-and-getmysubscriptionstatus-using-the-actor-from-useactor-ensure-parameter-shapes-and-return-types-exactly-match-the-candid-interface-generated-from-backend-main-mo-all-mutation-hooks-must-invalidate-the-correct-react-query-cache-keys-on-success-so-the-ui-stays-in-sync-without-manual-page-refresh",
      "title": "Update frontend/src/hooks/useQueries.ts to correctly call all backend functions â€” createPost, editPost, deletePost, setPostPrivacy, addReaction, getMyReaction, getMyPosts, getPublicPosts, getMyProfile, isAdmin, register, validateInviteCode, and getMySubscriptionStatus â€” using the actor from useActor. Ensure parameter shapes and return types exactly match the Candid interface generated from backend/main.mo. All mutation hooks must invalidate the correct React Query cache keys on success so the UI stays in sync without manual page refresh.",
      "reqIds": [
        "REQ-69"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-signuppage-calls-the-register-mutation-from-usequeries-ts-with-the-correct-invitecode-pseudonym-region-arguments-correctly-handles-ok-and-err-result-variants-returned-by-the-backend-routes-to-the-dashboard-on-success-and-displays-the-backend-error-message-inline-on-failure",
      "title": "Ensure SignupPage calls the register mutation from useQueries.ts with the correct (inviteCode, pseudonym, region) arguments, correctly handles #ok and #err Result variants returned by the backend, routes to the dashboard on success, and displays the backend error message inline on failure.",
      "reqIds": [
        "REQ-70"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-postcreationpage-calls-the-createpost-mutation-with-the-correct-emotiontype-content-arguments-handles-the-result-returned-by-the-backend-navigates-to-the-my-posts-page-on-success-and-shows-any-backend-error-message-inline-on-failure",
      "title": "Ensure PostCreationPage calls the createPost mutation with the correct (emotionType, content) arguments, handles the Result returned by the backend, navigates to the My Posts page on success, and shows any backend error message inline on failure.",
      "reqIds": [
        "REQ-71"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-postcard-calls-the-editpost-deletepost-and-setpostprivacy-mutations-with-correct-arguments-handles-result-variants-and-invalidates-myposts-and-publicposts-query-keys-on-success-so-the-card-list-updates-immediately-without-a-page-refresh",
      "title": "Ensure PostCard calls the editPost, deletePost, and setPostPrivacy mutations with correct arguments, handles Result variants, and invalidates 'myPosts' and 'publicPosts' query keys on success so the card list updates immediately without a page refresh.",
      "reqIds": [
        "REQ-72"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-publicpostcard-calls-the-addreaction-mutation-and-getmyreaction-query-with-correct-arguments-display-the-user-s-existing-reaction-if-getmyreaction-returns-a-value-disable-reaction-buttons-for-the-post-owner-and-for-posts-on-which-the-user-has-already-reacted",
      "title": "Ensure PublicPostCard calls the addReaction mutation and getMyReaction query with correct arguments. Display the user's existing reaction if getMyReaction returns a value. Disable reaction buttons for the post owner and for posts on which the user has already reacted.",
      "reqIds": [
        "REQ-73"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-all-admin-functions-admingetallpublicposts-admingetuserposts-admindeletepost-adminsuspenduser-adminunsuspenduser-admingetallusers-addinvitecode-revokeinvitecode-and-setsubscriptionstatus-are-exposed-as-query-or-mutation-hooks-in-usequeries-ts-and-are-correctly-consumed-by-the-admin-dashboard-components-adminpublicpostslist-adminusermanagement-admininvitecodes-adminuserposthistory",
      "title": "Ensure all admin functions â€” adminGetAllPublicPosts, adminGetUserPosts, adminDeletePost, adminSuspendUser, adminUnsuspendUser, adminGetAllUsers, addInviteCode, revokeInviteCode, and setSubscriptionStatus â€” are exposed as query or mutation hooks in useQueries.ts and are correctly consumed by the admin dashboard components (AdminPublicPostsList, AdminUserManagement, AdminInviteCodes, AdminUserPostHistory).",
      "reqIds": [
        "REQ-74"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-dashboardpage-and-postcreationpage-read-the-effective-subscription-status-from-the-getmysubscriptionstatus-query-or-getmyprofile-and-correctly-pass-it-to-subscriptionbanner-and-the-subscription-gating-logic-in-subscriptionhelpers-ts-so-expired-users-see-the-calm-non-alarming-banner-and-cannot-submit-posts-or-trigger-go-public-actions",
      "title": "Ensure DashboardPage and PostCreationPage read the effective subscription status from the getMySubscriptionStatus query (or getMyProfile) and correctly pass it to SubscriptionBanner and the subscription-gating logic in subscriptionHelpers.ts, so expired users see the calm non-alarming banner and cannot submit posts or trigger go-public actions.",
      "reqIds": [
        "REQ-75"
      ],
      "version": 1
    },
    {
      "id": "feature-integrate-internet-identity-authentication-into-the-frontend-so-that-users-have-persistent-pseudonymous-sessions-tied-to-their-icp-principal-the-loginpage-must-trigger-the-internet-identity-flow-via-the-existing-useinternetidentity-hook-redirect-to-the-dashboard-if-a-registered-profile-exists-or-redirect-to-the-signup-page-if-no-profile-is-found-the-logout-action-in-the-header-must-call-the-logout-function-from-useinternetidentity-and-redirect-to-the-login-page",
      "title": "Integrate Internet Identity authentication into the frontend so that users have persistent, pseudonymous sessions tied to their ICP Principal. The LoginPage must trigger the Internet Identity flow via the existing useInternetIdentity hook, redirect to the dashboard if a registered profile exists, or redirect to the signup page if no profile is found. The logout action in the Header must call the logout function from useInternetIdentity and redirect to the login page.",
      "reqIds": [
        "REQ-76"
      ],
      "version": 1
    },
    {
      "id": "feature-audit-and-fix-the-complete-authentication-flow-loginpage-must-trigger-internet-identity-login-via-useinternetidentity-check-getmyprofile-after-login-redirect-to-dashboard-if-profile-exists-or-signup-if-not-the-logout-button-in-header-must-call-logout-from-useinternetidentity-and-redirect-to-login-unauthenticated-users-visiting-any-protected-route-dashboard-posts-community-admin-must-be-redirected-to-login",
      "title": "Audit and fix the complete authentication flow: LoginPage must trigger Internet Identity login via useInternetIdentity, check getMyProfile after login, redirect to /dashboard if profile exists or /signup if not. The logout button in Header must call logout from useInternetIdentity and redirect to /login. Unauthenticated users visiting any protected route (/dashboard, /posts, /community, /admin) must be redirected to /login.",
      "reqIds": [
        "REQ-77"
      ],
      "version": 1
    },
    {
      "id": "feature-audit-and-fix-the-signuppage-it-must-read-the-invite-code-from-url-params-if-present-via-urlparams-ts-call-the-register-mutation-from-usequeries-ts-with-invitecode-pseudonym-region-arguments-correctly-unwrap-ok-and-err-result-variants-from-the-backend-route-to-dashboard-on-success-and-display-the-backend-error-text-inline-not-in-a-modal-on-failure-the-region-selector-must-offer-exactly-india-and-global-options",
      "title": "Audit and fix the SignupPage: it must read the invite code from URL params (if present) via urlParams.ts, call the register mutation from useQueries.ts with (inviteCode, pseudonym, region) arguments, correctly unwrap #ok and #err Result variants from the backend, route to /dashboard on success, and display the backend error text inline (not in a modal) on failure. The region selector must offer exactly 'India' and 'Global' options.",
      "reqIds": [
        "REQ-78"
      ],
      "version": 1
    },
    {
      "id": "feature-audit-and-fix-the-dashboardpage-it-must-call-getmyprofile-and-getmysubscriptionstatus-or-derive-status-from-profile-pass-the-effective-subscription-status-to-subscriptionbanner-and-block-navigation-to-post-creation-if-the-user-s-effective-status-is-expired-the-three-emotion-buttons-confess-broke-happy-must-each-navigate-to-create-with-the-chosen-emotion-as-a-route-or-query-param-no-red-ui-elements-use-the-muted-supportive-subscription-banner-when-status-is-expired",
      "title": "Audit and fix the DashboardPage: it must call getMyProfile and getMySubscriptionStatus (or derive status from profile), pass the effective subscription status to SubscriptionBanner, and block navigation to post creation if the user's effective status is #expired. The three emotion buttons (Confess, Broke, Happy) must each navigate to /create with the chosen emotion as a route or query param. No red UI elements; use the muted, supportive subscription banner when status is expired.",
      "reqIds": [
        "REQ-79"
      ],
      "version": 1
    },
    {
      "id": "feature-audit-and-fix-the-postcreationpage-it-must-read-the-emotion-type-from-route-query-params-call-createpost-mutation-with-emotiontype-content-enforce-the-24-word-minimum-client-side-for-confess-and-happy-disabling-submit-if-below-threshold-handle-the-result-from-the-backend-navigate-to-posts-on-success-and-show-any-backend-error-inline-on-failure-the-subscription-expired-gate-must-block-form-submission-with-an-inline-message",
      "title": "Audit and fix the PostCreationPage: it must read the emotion type from route/query params, call createPost mutation with (emotionType, content), enforce the 24-word minimum client-side for #confess and #happy (disabling submit if below threshold), handle the Result from the backend, navigate to /posts on success, and show any backend error inline on failure. The subscription-expired gate must block form submission with an inline message.",
      "reqIds": [
        "REQ-80"
      ],
      "version": 1
    },
    {
      "id": "feature-audit-and-fix-the-mypostspage-and-postcard-postcard-must-call-editpost-with-postid-newcontent-deletepost-with-postid-and-setpostprivacy-with-postid-isprivate-using-the-mutations-from-usequeries-ts-on-success-each-mutation-must-invalidate-both-the-myposts-and-publicposts-react-query-cache-keys-so-the-list-updates-without-a-manual-refresh-the-go-public-confirmation-dialog-must-show-the-exact-text-this-post-will-be-visible-to-all-veil-members-the-edit-button-must-only-appear-when-post-editable-is-true",
      "title": "Audit and fix the MyPostsPage and PostCard: PostCard must call editPost with (postId, newContent), deletePost with (postId), and setPostPrivacy with (postId, isPrivate) using the mutations from useQueries.ts. On success each mutation must invalidate both the 'myPosts' and 'publicPosts' React Query cache keys so the list updates without a manual refresh. The 'Go Public' confirmation dialog must show the exact text 'This post will be visible to all Veil members.' The Edit button must only appear when post.editable is true.",
      "reqIds": [
        "REQ-81"
      ],
      "version": 1
    },
    {
      "id": "feature-audit-and-fix-the-communityfeedpage-and-publicpostcard-publicpostcard-must-call-getmyreaction-postid-to-fetch-the-user-s-existing-reaction-and-display-it-highlighted-the-addreaction-mutation-must-be-called-with-postid-reactiontype-reaction-buttons-must-be-disabled-for-the-post-owner-and-for-any-post-the-user-has-already-reacted-to-posts-must-be-sorted-newest-first-consistently-no-comments-no-reply-buttons-no-follower-counts-no-popularity-indicators",
      "title": "Audit and fix the CommunityFeedPage and PublicPostCard: PublicPostCard must call getMyReaction(postId) to fetch the user's existing reaction and display it highlighted. The addReaction mutation must be called with (postId, reactionType). Reaction buttons must be disabled for the post owner and for any post the user has already reacted to. Posts must be sorted newest-first consistently. No comments, no reply buttons, no follower counts, no popularity indicators.",
      "reqIds": [
        "REQ-82"
      ],
      "version": 1
    },
    {
      "id": "feature-audit-and-fix-the-adminpage-and-all-admindashboard-sub-components-adminpublicpostslist-must-call-admingetallpublicposts-query-and-admindeletepost-mutation-adminusermanagement-must-call-admingetallusers-query-and-adminsuspenduser-adminunsuspenduser-setsubscriptionstatus-mutations-admininvitecodes-must-call-addinvitecode-and-revokeinvitecode-mutations-and-list-all-codes-adminuserposthistory-must-call-admingetuserposts-query-by-principal-all-these-hooks-must-be-correctly-wired-in-usequeries-ts-and-the-page-must-redirect-non-admins-away",
      "title": "Audit and fix the AdminPage and all AdminDashboard sub-components. AdminPublicPostsList must call adminGetAllPublicPosts query and adminDeletePost mutation. AdminUserManagement must call adminGetAllUsers query and adminSuspendUser / adminUnsuspendUser / setSubscriptionStatus mutations. AdminInviteCodes must call addInviteCode and revokeInviteCode mutations and list all codes. AdminUserPostHistory must call adminGetUserPosts query by principal. All these hooks must be correctly wired in useQueries.ts and the page must redirect non-admins away.",
      "reqIds": [
        "REQ-83"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-usequeries-ts-has-complete-correctly-typed-hooks-for-every-backend-function-consumed-by-the-frontend-getmyprofile-getmyposts-getpublicposts-isadmin-getmysubscriptionstatus-getmyreaction-createpost-editpost-deletepost-setpostprivacy-addreaction-register-validateinvitecode-admingetallpublicposts-admingetuserposts-admindeletepost-adminsuspenduser-adminunsuspenduser-admingetallusers-addinvitecode-revokeinvitecode-setsubscriptionstatus-all-parameter-shapes-and-return-types-must-match-the-candid-interface-generated-from-backend-main-mo-all-mutation-hooks-must-call-queryclient-invalidatequeries-with-the-correct-cache-keys-on-success",
      "title": "Ensure useQueries.ts has complete, correctly-typed hooks for every backend function consumed by the frontend: getMyProfile, getMyPosts, getPublicPosts, isAdmin, getMySubscriptionStatus, getMyReaction, createPost, editPost, deletePost, setPostPrivacy, addReaction, register, validateInviteCode, adminGetAllPublicPosts, adminGetUserPosts, adminDeletePost, adminSuspendUser, adminUnsuspendUser, adminGetAllUsers, addInviteCode, revokeInviteCode, setSubscriptionStatus. All parameter shapes and return types must match the Candid interface generated from backend/main.mo. All mutation hooks must call queryClient.invalidateQueries with the correct cache keys on success.",
      "reqIds": [
        "REQ-84"
      ],
      "version": 1
    },
    {
      "id": "feature-perform-a-final-audit-and-fix-of-the-signuppage-it-must-read-the-invite-code-from-url-params-if-present-via-urlparams-ts-call-the-register-mutation-from-usequeries-ts-with-invitecode-pseudonym-region-arguments-correctly-unwrap-ok-and-err-result-variants-from-the-backend-route-to-dashboard-on-success-and-display-the-backend-error-text-inline-not-in-a-modal-on-failure-the-region-selector-must-offer-exactly-india-and-global-options",
      "title": "Perform a final audit and fix of the SignupPage: it must read the invite code from URL params (if present) via urlParams.ts, call the register mutation from useQueries.ts with (inviteCode, pseudonym, region) arguments, correctly unwrap #ok and #err Result variants from the backend, route to /dashboard on success, and display the backend error text inline (not in a modal) on failure. The region selector must offer exactly 'India' and 'Global' options.",
      "reqIds": [
        "REQ-87"
      ],
      "version": 1
    },
    {
      "id": "feature-audit-and-fix-the-signuppage-so-that-invite-code-validation-errors-returned-by-the-backend-are-surfaced-clearly-to-the-user-when-the-backend-returns-an-err-variant-from-the-register-call-e-g-invalid-invite-code-invite-code-already-used-capacity-reached-the-exact-error-text-must-be-displayed-inline-below-the-form-not-in-a-modal-the-form-must-remain-interactive-so-the-user-can-correct-their-input-and-retry",
      "title": "Audit and fix the SignupPage so that invite code validation errors returned by the backend are surfaced clearly to the user. When the backend returns an #err variant from the register call (e.g. 'Invalid invite code', 'Invite code already used', 'Capacity reached'), the exact error text must be displayed inline below the form â€” not in a modal. The form must remain interactive so the user can correct their input and retry.",
      "reqIds": [
        "REQ-114"
      ],
      "version": 1
    },
    {
      "id": "feature-in-the-frontend-ensure-that-no-backend-actor-call-is-made-before-a-valid-non-anonymous-internet-identity-principal-is-confirmed-in-usequeries-ts-and-any-component-that-calls-backend-functions-gate-all-actor-calls-behind-a-check-that-the-identity-from-useinternetidentity-is-authenticated-isauthenticated-is-true-and-the-identity-is-not-the-anonymous-identity-if-the-identity-is-anonymous-or-absent-return-early-or-skip-the-query-do-not-dispatch-the-call-to-the-actor",
      "title": "In the frontend, ensure that no backend actor call is made before a valid (non-anonymous) Internet Identity principal is confirmed. In useQueries.ts and any component that calls backend functions, gate all actor calls behind a check that the identity from useInternetIdentity is authenticated (isAuthenticated is true and the identity is not the anonymous identity). If the identity is anonymous or absent, return early or skip the query â€” do not dispatch the call to the actor.",
      "reqIds": [
        "REQ-126"
      ],
      "version": 1
    },
    {
      "id": "feature-in-frontend-src-hooks-usequeries-ts-reinforce-the-existing-anonymous-identity-guard-so-that-all-actor-calls-check-both-isauthenticated-from-useinternetidentity-and-that-the-identity-is-not-the-anonymous-identity-before-dispatching-any-call-to-the-backend-actor-if-either-check-fails-the-query-must-return-early-with-no-result-and-mutations-must-not-be-dispatched",
      "title": "In frontend/src/hooks/useQueries.ts, reinforce the existing anonymous-identity guard so that all actor calls check both isAuthenticated from useInternetIdentity and that the identity is not the anonymous identity before dispatching any call to the backend actor. If either check fails, the query must return early with no result and mutations must not be dispatched.",
      "reqIds": [
        "REQ-129"
      ],
      "version": 1
    },
    {
      "id": "feature-in-frontend-src-hooks-usequeries-ts-reinforce-the-anonymous-identity-guard-so-that-before-dispatching-any-call-to-the-backend-actor-both-conditions-are-verified-1-isauthenticated-is-true-from-useinternetidentity-and-2-the-identity-is-not-the-anonymous-identity-identity-getprincipal-isanonymous-returns-false-if-either-check-fails-queries-must-return-early-with-no-result-and-mutations-must-not-be-dispatched-to-the-actor",
      "title": "In frontend/src/hooks/useQueries.ts, reinforce the anonymous-identity guard so that before dispatching any call to the backend actor, both conditions are verified: (1) isAuthenticated is true from useInternetIdentity, and (2) the identity is not the anonymous identity (identity.getPrincipal().isAnonymous() returns false). If either check fails, queries must return early with no result and mutations must not be dispatched to the actor.",
      "reqIds": [
        "REQ-133"
      ],
      "version": 1
    },
    {
      "id": "feature-in-frontend-src-hooks-usequeries-ts-reinforce-the-anonymous-identity-guard-so-that-before-dispatching-any-call-to-the-backend-actor-both-conditions-are-verified-1-isauthenticated-is-true-from-useinternetidentity-and-2-identity-getprincipal-isanonymous-returns-false-if-either-check-fails-queries-must-return-early-with-no-result-and-mutations-must-not-be-dispatched-to-the-actor-this-prevents-the-frontend-from-ever-sending-a-request-with-an-anonymous-principal-that-causes-the-backend-rts-trap",
      "title": "In frontend/src/hooks/useQueries.ts, reinforce the anonymous-identity guard so that before dispatching any call to the backend actor, both conditions are verified: (1) isAuthenticated is true from useInternetIdentity, and (2) identity.getPrincipal().isAnonymous() returns false. If either check fails, queries must return early with no result and mutations must not be dispatched to the actor. This prevents the frontend from ever sending a request with an anonymous principal that causes the backend RTS trap.",
      "reqIds": [
        "REQ-137"
      ],
      "version": 1
    },
    {
      "id": "feature-add-an-admin-signup-section-to-the-adminpage-or-admindashboard-in-the-frontend-show-a-small-form-with-a-pseudonym-input-and-a-region-selector-india-global-on-submit-call-a-new-adminregister-mutation-in-usequeries-ts-that-invokes-the-backend-adminregister-function-on-success-display-a-confirmation-message-account-created-successfully-on-failure-display-the-backend-error-inline-this-section-must-only-be-visible-when-the-current-user-is-confirmed-as-admin",
      "title": "Add an 'Admin Signup' section to the AdminPage (or AdminDashboard) in the frontend. Show a small form with a pseudonym input and a region selector (India / Global). On submit, call a new `adminRegister` mutation in useQueries.ts that invokes the backend `adminRegister` function. On success, display a confirmation message 'Account created successfully.' On failure, display the backend error inline. This section must only be visible when the current user is confirmed as admin.",
      "reqIds": [
        "REQ-139"
      ],
      "version": 1
    },
    {
      "id": "feature-update-frontend-src-pages-signuppage-tsx-to-remove-the-invite-code-input-field-entirely-the-registration-form-must-only-show-a-pseudonym-input-and-a-region-selector-india-global-call-the-register-mutation-from-usequeries-ts-with-only-pseudonym-region-arguments-remove-any-url-param-reading-for-invite-codes-handle-ok-and-err-result-variants-from-the-backend-as-before-route-to-dashboard-on-success-and-display-the-backend-error-text-inline-on-failure",
      "title": "Update frontend/src/pages/SignupPage.tsx to remove the invite code input field entirely. The registration form must only show a pseudonym input and a region selector (India / Global). Call the register mutation from useQueries.ts with only (pseudonym, region) arguments. Remove any URL param reading for invite codes. Handle #ok and #err Result variants from the backend as before â€” route to /dashboard on success and display the backend error text inline on failure.",
      "reqIds": [
        "REQ-142"
      ],
      "version": 1
    },
    {
      "id": "feature-update-frontend-src-hooks-usequeries-ts-to-change-the-register-mutation-so-it-calls-actor-register-pseudonym-region-with-no-invite-code-argument-remove-the-invitecode-parameter-from-the-mutation-s-input-type-ensure-the-mutation-still-invalidates-the-correct-react-query-cache-keys-myprofile-subscriptionstatus-on-success-also-remove-any-validateinvitecode-hook-usage-that-is-only-needed-in-support-of-the-signup-flow-keep-the-hook-definition-if-it-is-used-elsewhere-e-g-admin-tools-but-do-not-call-it-from-the-signup-path",
      "title": "Update frontend/src/hooks/useQueries.ts to change the register mutation so it calls `actor.register(pseudonym, region)` with no invite code argument. Remove the inviteCode parameter from the mutation's input type. Ensure the mutation still invalidates the correct React Query cache keys ('myProfile', 'subscriptionStatus') on success. Also remove any validateInviteCode hook usage that is only needed in support of the signup flow â€” keep the hook definition if it is used elsewhere (e.g., admin tools), but do not call it from the signup path.",
      "reqIds": [
        "REQ-143"
      ],
      "version": 1
    },
    {
      "id": "feature-in-frontend-src-hooks-usequeries-ts-add-an-additional-layer-of-defense-before-dispatching-any-actor-call-verify-both-1-isauthenticated-is-true-from-useinternetidentity-and-2-the-identity-s-principal-is-not-anonymous-identity-getprincipal-isanonymous-false-if-either-check-fails-all-query-functions-must-return-early-with-no-result-and-all-mutation-functions-must-throw-or-resolve-without-dispatching-the-actor-call-this-ensures-the-frontend-never-sends-a-request-carrying-an-anonymous-principal-to-the-backend",
      "title": "In frontend/src/hooks/useQueries.ts, add an additional layer of defense: before dispatching any actor call, verify both (1) isAuthenticated is true from useInternetIdentity, and (2) the identity's principal is not anonymous (identity.getPrincipal().isAnonymous() === false). If either check fails, all query functions must return early with no result and all mutation functions must throw or resolve without dispatching the actor call. This ensures the frontend never sends a request carrying an anonymous principal to the backend.",
      "reqIds": [
        "REQ-146"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Invite-only onboarding with invite code, pseudonym selection, region selection, 15-day grace period, and 100-member cap",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Emotion posting system with three states (Confess, Broke, Happy), live word counter, and private-by-default posts",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Word validation: Confess and Happy require minimum 24 words (server-side enforced); Broke has no minimum",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-4",
      "summary": "Privacy toggle: posts private by default, user can go public or revert to private anytime",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-5",
      "summary": "Support reactions (Support, Care, Strength) on public posts only; one reaction per user per post; editing locked after first reaction",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-6",
      "summary": "Subscription gating: region-based pricing (India â‚¹150/month, Global $9/month); expired users can view but cannot post or go public",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-7",
      "summary": "Human moderation admin panel: view/delete public posts, flag posts, suspend users, revoke invites, view user post history",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-8",
      "summary": "Implement the backend data models for Users, Posts, and Reactions as stable Motoko types in the main actor. Users: id, pseudonym, region (India | Global), subscriptionStatus (grace | active | expired), subscriptionStartDate (Int timestamp), inviteCode, createdAt, suspended (Bool). Posts: id, userId, emotionType (confess | broke | happy), content, isPrivate (default true), reactionCount (default 0), editable (default true), createdAt. Reactions: id, postId, userId, reactionType (support | care | strength), createdAt.",
      "reqIds": [
        "REQ-1"
      ],
      "status": "pending"
    },
    {
      "id": "AR-9",
      "summary": "Implement an invite code system in the backend. Store a set of valid invite codes pre-seeded by the admin. Expose a query to validate an invite code. On registration, consume and invalidate the code. Block registration when total user count reaches 100. Expose an admin function to add new invite codes and revoke existing ones.",
      "reqIds": [
        "REQ-2"
      ],
      "status": "pending"
    },
    {
      "id": "AR-10",
      "summary": "Implement user registration in the backend: accept (inviteCode, pseudonym, region). Validate invite code, check capacity, create user with subscriptionStatus = 'grace' and subscriptionStartDate = now. Return a session token (principal-based). Enforce pseudonymous identity only â€” no real name or email field stored or required.",
      "reqIds": [
        "REQ-3"
      ],
      "status": "pending"
    },
    {
      "id": "AR-11",
      "summary": "Implement subscription status logic in the backend. Compute effective subscription status based on subscriptionStatus field and subscriptionStartDate: during the first 15 days after creation treat status as 'grace'; after 15 days if not upgraded to 'active', treat as 'expired'. Expose an admin function to manually set a user's subscriptionStatus to 'active' or 'expired'. Enforce subscription gating on post creation and go-public actions: users with status 'expired' can read posts but cannot create posts or make posts public.",
      "reqIds": [
        "REQ-4"
      ],
      "status": "pending"
    },
    {
      "id": "AR-12",
      "summary": "Implement post creation in the backend. Accept (userId, emotionType, content). Enforce server-side word count validation: Confess and Happy require minimum 24 words; Broke has no minimum. Store post with isPrivate = true, reactionCount = 0, editable = true. Reject creation if subscription status is 'expired'.",
      "reqIds": [
        "REQ-5"
      ],
      "status": "pending"
    },
    {
      "id": "AR-13",
      "summary": "Implement post editing in the backend. Allow the post owner to update post content only when editable = true (i.e., reactionCount = 0). Enforce the same word-count rules on edit as on creation. Once reactionCount > 0, set editable = false permanently and reject any further edit attempts.",
      "reqIds": [
        "REQ-6"
      ],
      "status": "pending"
    },
    {
      "id": "AR-14",
      "summary": "Implement privacy toggle in the backend. Allow post owner to set isPrivate = false (go public) or isPrivate = true (make private again) at any time. When going public, validate that the user's subscription is not expired. When a post is made private again, it is immediately hidden from community queries and no new reactions can be added, but existing reactionCount is preserved.",
      "reqIds": [
        "REQ-7"
      ],
      "status": "pending"
    },
    {
      "id": "AR-15",
      "summary": "Implement the reactions system in the backend. Allow any authenticated non-suspended member to react to a public post with one of: support | care | strength. Enforce one reaction per user per post. On reaction creation, increment post.reactionCount and set post.editable = false. Reactions on private posts are not accepted. Expose a query for a user to check their own reaction on a post.",
      "reqIds": [
        "REQ-8"
      ],
      "status": "pending"
    },
    {
      "id": "AR-16",
      "summary": "Implement post deletion in the backend. Allow post owner to delete their post silently at any time. No notifications are triggered. Remove associated reactions. Expose this as a private owner-only function.",
      "reqIds": [
        "REQ-9"
      ],
      "status": "pending"
    },
    {
      "id": "AR-17",
      "summary": "Implement admin moderation functions in the backend. Expose admin-only functions for: view all public posts in chronological order, view all posts by a specific user, delete any post, suspend a user (sets suspended = true), unsuspend a user, add invite codes, revoke unused invite codes. Suspended users cannot create posts or react. Protect all admin functions with a hardcoded admin principal check.",
      "reqIds": [
        "REQ-10"
      ],
      "status": "pending"
    },
    {
      "id": "AR-18",
      "summary": "Implement the backend data models for Users, Posts, Reactions, and InviteCodes as stable Motoko types in the main actor. Users: id (Principal), pseudonym (Text), region (variant { India; Global }), subscriptionStatus (variant { grace; active; expired }), subscriptionStartDate (Int timestamp), inviteCode (Text), createdAt (Int), suspended (Bool). Posts: id (Text), userId (Principal), emotionType (variant { confess; broke; happy }), content (Text), isPrivate (Bool, default true), reactionCount (Nat, default 0), editable (Bool, default true), createdAt (Int). Reactions: id (Text), postId (Text), userId (Principal), reactionType (variant { support; care; strength }), createdAt (Int). InviteCodes: code (Text), used (Bool), usedBy (optional Principal). Use stable HashMap or TrieMap for all state so data survives upgrades.",
      "reqIds": [
        "REQ-19"
      ],
      "status": "pending"
    },
    {
      "id": "AR-19",
      "summary": "Implement an invite code system in the backend. Pre-seed a set of admin-defined invite codes in stable state. Expose a query `validateInviteCode(code: Text): Bool`. On registration, mark the code as used and record the Principal who used it. Block registration when total user count reaches 100. Expose admin-only functions `addInviteCode(code: Text)` and `revokeInviteCode(code: Text)` â€” revoking only works on unused codes.",
      "reqIds": [
        "REQ-20"
      ],
      "status": "pending"
    },
    {
      "id": "AR-20",
      "summary": "Implement user registration in the backend. Expose `register(inviteCode: Text, pseudonym: Text, region: { #India; #Global }): Result<User, Text>`. Validate invite code validity and capacity. Create user with caller's Principal as id, subscriptionStatus = #grace, subscriptionStartDate = Time.now(), suspended = false. Return the created user record on success or a descriptive error text on failure. No email or real name stored.",
      "reqIds": [
        "REQ-21"
      ],
      "status": "pending"
    },
    {
      "id": "AR-21",
      "summary": "Implement subscription status logic in the backend. Add a helper function `getEffectiveStatus(user: User): SubscriptionStatus` that returns #grace if Time.now() - subscriptionStartDate < 15 days and stored status is #grace; returns #active if status is #active; otherwise returns #expired. Expose a query `getMySubscriptionStatus(): Result<SubscriptionStatus, Text>` for the caller. Expose admin-only functions `setSubscriptionStatus(userId: Principal, status: SubscriptionStatus): Result<(), Text>` to manually override status.",
      "reqIds": [
        "REQ-22"
      ],
      "status": "pending"
    },
    {
      "id": "AR-22",
      "summary": "Implement post creation in the backend. Expose `createPost(emotionType: EmotionType, content: Text): Result<Post, Text>`. Reject if caller is not registered, is suspended, or has effective subscription status of #expired. Enforce server-side word count: Confess and Happy require minimum 24 words; Broke has no minimum. Store post with isPrivate = true, reactionCount = 0, editable = true, createdAt = Time.now(). Generate a unique post id.",
      "reqIds": [
        "REQ-23"
      ],
      "status": "pending"
    },
    {
      "id": "AR-23",
      "summary": "Implement post editing in the backend. Expose `editPost(postId: Text, newContent: Text): Result<Post, Text>`. Allow edit only if caller is the post owner and editable = true (reactionCount = 0). Apply the same word-count rules as post creation. If reactionCount > 0, return an error and do not modify the post.",
      "reqIds": [
        "REQ-24"
      ],
      "status": "pending"
    },
    {
      "id": "AR-24",
      "summary": "Implement privacy toggle in the backend. Expose `setPostPrivacy(postId: Text, isPrivate: Bool): Result<Post, Text>`. When going public (isPrivate = false), validate caller is owner and effective subscription status is not #expired and user is not suspended. When making private (isPrivate = true), validate caller is owner only â€” no subscription check needed. Private posts are immediately excluded from all community feed queries. Existing reactionCount is preserved when toggling private.",
      "reqIds": [
        "REQ-25"
      ],
      "status": "pending"
    },
    {
      "id": "AR-25",
      "summary": "Implement the reactions system in the backend. Expose `addReaction(postId: Text, reactionType: ReactionType): Result<Reaction, Text>`. Only allow reactions on public posts (isPrivate = false). Reject if caller is the post owner, is suspended, or is not registered. Enforce one reaction per user per post â€” return an error if a reaction already exists. On successful reaction: increment post.reactionCount and set post.editable = false. Expose a query `getMyReaction(postId: Text): ?ReactionType` for the caller to check their existing reaction.",
      "reqIds": [
        "REQ-26"
      ],
      "status": "pending"
    },
    {
      "id": "AR-26",
      "summary": "Implement post deletion in the backend. Expose `deletePost(postId: Text): Result<(), Text>`. Allow post owner to delete their post at any time. Remove all associated reactions from stable state. No notifications triggered. Expose an admin-only function `adminDeletePost(postId: Text): Result<(), Text>` that can delete any post regardless of ownership.",
      "reqIds": [
        "REQ-27"
      ],
      "status": "pending"
    },
    {
      "id": "AR-27",
      "summary": "Implement admin moderation functions in the backend. Protect all functions with a hardcoded admin Principal constant. Expose: `adminGetAllPublicPosts(): [Post]` (chronological order), `adminGetUserPosts(userId: Principal): [Post]` (all posts by user), `adminSuspendUser(userId: Principal): Result<(), Text>`, `adminUnsuspendUser(userId: Principal): Result<(), Text>`, `adminGetAllUsers(): [User]`. Suspended users cannot create posts, react, or go public â€” enforce this in all relevant functions.",
      "reqIds": [
        "REQ-28"
      ],
      "status": "pending"
    },
    {
      "id": "AR-28",
      "summary": "Expose the necessary backend query and update functions to support all existing frontend screens. At minimum expose: `getMyProfile(): Result<User, Text>`, `getMyPosts(): [Post]`, `getPublicPosts(): [Post]`, `isAdmin(): Bool`. Ensure all function signatures are compatible with the existing frontend hooks in `frontend/src/hooks/useQueries.ts` and the Candid interface auto-generated from main.mo. Do not break any existing frontend data-fetching contracts.",
      "reqIds": [
        "REQ-29"
      ],
      "status": "pending"
    },
    {
      "id": "AR-29",
      "summary": "Implement post creation in the backend. Expose `createPost(emotionType: EmotionType, content: Text): async Result<Post, Text>`. Reject if caller is not registered, is suspended, or has effective subscription status of #expired. Enforce server-side word count: Confess and Happy require minimum 24 words; Broke has no minimum. Store post with isPrivate = true, reactionCount = 0, editable = true, createdAt = Time.now(). Generate a unique post id using a counter or hash.",
      "reqIds": [
        "REQ-30"
      ],
      "status": "pending"
    },
    {
      "id": "AR-30",
      "summary": "Implement post editing in the backend. Expose `editPost(postId: Text, newContent: Text): async Result<Post, Text>`. Allow edit only if caller is the post owner and editable = true (reactionCount = 0). Apply the same word-count rules as post creation. If reactionCount > 0, return a clear error and do not modify the post.",
      "reqIds": [
        "REQ-31"
      ],
      "status": "pending"
    },
    {
      "id": "AR-31",
      "summary": "Implement privacy toggle in the backend. Expose `setPostPrivacy(postId: Text, isPrivate: Bool): async Result<Post, Text>`. When going public (isPrivate = false), validate caller is owner, effective subscription is not #expired, and user is not suspended. When making private (isPrivate = true), validate caller is owner only â€” no subscription check needed. Private posts are immediately excluded from all community feed queries. Existing reactionCount is preserved when toggling private.",
      "reqIds": [
        "REQ-32"
      ],
      "status": "pending"
    },
    {
      "id": "AR-32",
      "summary": "Implement the reactions system in the backend. Expose `addReaction(postId: Text, reactionType: ReactionType): async Result<Reaction, Text>` where ReactionType is variant { #support; #care; #strength }. Only allow reactions on public posts (isPrivate = false). Reject if caller is the post owner, is suspended, or is not registered. Enforce one reaction per user per post â€” return an error if a reaction already exists. On successful reaction: increment post.reactionCount and set post.editable = false. Expose `getMyReaction(postId: Text): async ?ReactionType` for the caller.",
      "reqIds": [
        "REQ-33"
      ],
      "status": "pending"
    },
    {
      "id": "AR-33",
      "summary": "Implement post deletion in the backend. Expose `deletePost(postId: Text): async Result<(), Text>` allowing post owner to delete their post at any time. Remove all associated reactions from stable state on deletion. No notifications triggered. Expose `adminDeletePost(postId: Text): async Result<(), Text>` protected by admin Principal check that can delete any post regardless of ownership, also removing associated reactions.",
      "reqIds": [
        "REQ-34"
      ],
      "status": "pending"
    },
    {
      "id": "AR-34",
      "summary": "Implement admin moderation functions in the backend. Protect all with a hardcoded admin Principal constant. Expose: `adminGetAllPublicPosts(): async [Post]` (chronological order), `adminGetUserPosts(userId: Principal): async [Post]` (all posts by user), `adminSuspendUser(userId: Principal): async Result<(), Text>`, `adminUnsuspendUser(userId: Principal): async Result<(), Text>`, `adminGetAllUsers(): async [User]`. Enforce throughout: suspended users cannot create posts, react, or go public.",
      "reqIds": [
        "REQ-35"
      ],
      "status": "pending"
    },
    {
      "id": "AR-35",
      "summary": "Expose all query and update functions required by the frontend. At minimum: `getMyProfile(): async Result<User, Text>`, `getMyPosts(): async [Post]`, `getPublicPosts(): async [Post]`, `isAdmin(): async Bool`. Ensure all function signatures exactly match what is expected by `frontend/src/hooks/useQueries.ts` and the auto-generated Candid interface. Do not break any existing frontend data-fetching contracts.",
      "reqIds": [
        "REQ-36"
      ],
      "status": "pending"
    },
    {
      "id": "AR-36",
      "summary": "Implement the complete Motoko backend actor in backend/main.mo with all stable data models (Users, Posts, Reactions, InviteCodes), invite code system, user registration, subscription status logic with 15-day grace period, post creation with word-count enforcement, post editing with editability lock, privacy toggle, reactions system, post deletion, and all admin moderation functions. Protect admin functions with a hardcoded admin Principal constant. Expose all public query and update functions required by the frontend: getMyProfile, getMyPosts, getPublicPosts, isAdmin, createPost, editPost, deletePost, setPostPrivacy, addReaction, getMyReaction, register, validateInviteCode, getMySubscriptionStatus, adminGetAllPublicPosts, adminGetUserPosts, adminDeletePost, adminSuspendUser, adminUnsuspendUser, adminGetAllUsers, addInviteCode, revokeInviteCode. Ensure all function signatures exactly match what is consumed by frontend/src/hooks/useQueries.ts.",
      "reqIds": [
        "REQ-38"
      ],
      "status": "pending"
    },
    {
      "id": "AR-37",
      "summary": "Implement the complete Motoko backend actor in backend/main.mo with all stable data models: Users (id: Principal, pseudonym: Text, region: variant { #India; #Global }, subscriptionStatus: variant { #grace; #active; #expired }, subscriptionStartDate: Int, inviteCode: Text, createdAt: Int, suspended: Bool), Posts (id: Text, userId: Principal, emotionType: variant { #confess; #broke; #happy }, content: Text, isPrivate: Bool defaulting to true, reactionCount: Nat defaulting to 0, editable: Bool defaulting to true, createdAt: Int), Reactions (id: Text, postId: Text, userId: Principal, reactionType: variant { #support; #care; #strength }, createdAt: Int), InviteCodes (code: Text, used: Bool, usedBy: ?Principal). Use stable HashMap or TrieMap for all collections so data survives canister upgrades.",
      "reqIds": [
        "REQ-40"
      ],
      "status": "pending"
    },
    {
      "id": "AR-38",
      "summary": "Implement the invite code system in backend/main.mo. Pre-seed at least 5 admin-defined invite codes in stable state. Expose `validateInviteCode(code: Text): async Bool`. On registration, mark the code as used and record the caller Principal. Block registration when total user count reaches 100. Expose admin-only `addInviteCode(code: Text): async Result<(), Text>` and `revokeInviteCode(code: Text): async Result<(), Text>` â€” revoking only works on unused codes.",
      "reqIds": [
        "REQ-41"
      ],
      "status": "pending"
    },
    {
      "id": "AR-39",
      "summary": "Implement user registration in backend/main.mo. Expose `register(inviteCode: Text, pseudonym: Text, region: { #India; #Global }): async Result<User, Text>`. Validate invite code validity and capacity cap (100 users). Create user with caller's Principal as id, subscriptionStatus = #grace, subscriptionStartDate = Time.now(), suspended = false. Return the created User record on success or a descriptive error Text on failure. No email or real name stored.",
      "reqIds": [
        "REQ-42"
      ],
      "status": "pending"
    },
    {
      "id": "AR-40",
      "summary": "Implement subscription status logic in backend/main.mo. Add a private helper `getEffectiveStatus(user: User): SubscriptionStatus` that returns #grace if Time.now() - user.subscriptionStartDate < 15 days and stored status is #grace; returns #active if stored status is #active; otherwise returns #expired. Expose `getMySubscriptionStatus(): async Result<SubscriptionStatus, Text>` for the authenticated caller. Expose admin-only `setSubscriptionStatus(userId: Principal, status: SubscriptionStatus): async Result<(), Text>` to manually override status.",
      "reqIds": [
        "REQ-43"
      ],
      "status": "pending"
    },
    {
      "id": "AR-41",
      "summary": "Implement post creation in backend/main.mo. Expose `createPost(emotionType: EmotionType, content: Text): async Result<Post, Text>`. Reject if caller is not registered, is suspended, or has effective subscription status #expired. Enforce server-side word count: #confess and #happy require minimum 24 words; #broke has no minimum. Store post with isPrivate = true, reactionCount = 0, editable = true, createdAt = Time.now(). Generate a unique post id using a monotonic counter.",
      "reqIds": [
        "REQ-44"
      ],
      "status": "pending"
    },
    {
      "id": "AR-42",
      "summary": "Implement post editing in backend/main.mo. Expose `editPost(postId: Text, newContent: Text): async Result<Post, Text>`. Allow edit only if caller is the post owner and editable = true (reactionCount = 0). Apply the same word-count rules as post creation (24-word minimum for #confess and #happy). If reactionCount > 0, return a clear error and do not modify the post.",
      "reqIds": [
        "REQ-45"
      ],
      "status": "pending"
    },
    {
      "id": "AR-43",
      "summary": "Implement privacy toggle in backend/main.mo. Expose `setPostPrivacy(postId: Text, isPrivate: Bool): async Result<Post, Text>`. When going public (isPrivate = false), validate caller is owner, effective subscription is not #expired, and user is not suspended. When making private (isPrivate = true), validate caller is owner only â€” no subscription check. Private posts are immediately excluded from all community feed queries. Existing reactionCount is preserved when toggling private.",
      "reqIds": [
        "REQ-46"
      ],
      "status": "pending"
    },
    {
      "id": "AR-44",
      "summary": "Implement the reactions system in backend/main.mo. Expose `addReaction(postId: Text, reactionType: ReactionType): async Result<Reaction, Text>` where ReactionType is variant { #support; #care; #strength }. Only allow reactions on public posts (isPrivate = false). Reject if caller is the post owner, is suspended, or is not registered. Enforce one reaction per user per post â€” return an error if a reaction already exists. On successful reaction: increment post.reactionCount and set post.editable = false. Expose `getMyReaction(postId: Text): async ?ReactionType` for the caller to check their existing reaction.",
      "reqIds": [
        "REQ-47"
      ],
      "status": "pending"
    },
    {
      "id": "AR-45",
      "summary": "Implement post deletion in backend/main.mo. Expose `deletePost(postId: Text): async Result<(), Text>` allowing the post owner to delete their post at any time. Remove all associated reactions from stable state on deletion. No notifications triggered. Expose `adminDeletePost(postId: Text): async Result<(), Text>` protected by admin Principal check, which can delete any post regardless of ownership and also removes associated reactions.",
      "reqIds": [
        "REQ-48"
      ],
      "status": "pending"
    },
    {
      "id": "AR-46",
      "summary": "Implement admin moderation functions in backend/main.mo. Hardcode an admin Principal constant. Expose: `adminGetAllPublicPosts(): async [Post]` (sorted chronologically), `adminGetUserPosts(userId: Principal): async [Post]` (all posts by user), `adminSuspendUser(userId: Principal): async Result<(), Text>`, `adminUnsuspendUser(userId: Principal): async Result<(), Text>`, `adminGetAllUsers(): async [User]`. Enforce throughout all relevant functions: suspended users cannot create posts, react, or go public.",
      "reqIds": [
        "REQ-49"
      ],
      "status": "pending"
    },
    {
      "id": "AR-47",
      "summary": "Expose all query and update functions required by the existing frontend hooks in frontend/src/hooks/useQueries.ts. At minimum expose: `getMyProfile(): async Result<User, Text>`, `getMyPosts(): async [Post]`, `getPublicPosts(): async [Post]`, `isAdmin(): async Bool`. Ensure all function signatures (parameter types, return types) exactly match what is consumed by the frontend hooks and the auto-generated Candid interface. Do not break any existing frontend data-fetching contracts.",
      "reqIds": [
        "REQ-50"
      ],
      "status": "pending"
    },
    {
      "id": "AR-48",
      "summary": "Implement the complete Motoko backend actor in backend/main.mo with all stable data models: Users (id: Principal, pseudonym: Text, region: variant { #India; #Global }, subscriptionStatus: variant { #grace; #active; #expired }, subscriptionStartDate: Int, inviteCode: Text, createdAt: Int, suspended: Bool), Posts (id: Text, userId: Principal, emotionType: variant { #confess; #broke; #happy }, content: Text, isPrivate: Bool defaulting to true, reactionCount: Nat defaulting to 0, editable: Bool defaulting to true, createdAt: Int), Reactions (id: Text, postId: Text, userId: Principal, reactionType: variant { #support; #care; #strength }, createdAt: Int), InviteCodes (code: Text, used: Bool, usedBy: ?Principal). Use stable var with HashMap or TrieMap backed by stable arrays (preupgrade/postupgrade pattern) for all collections so data survives canister upgrades.",
      "reqIds": [
        "REQ-51"
      ],
      "status": "pending"
    },
    {
      "id": "AR-49",
      "summary": "Implement the invite code system in backend/main.mo. Pre-seed at least 5 admin-defined invite codes in stable state. Expose `validateInviteCode(code: Text): async Bool`. On registration, mark the code as used and record the caller Principal. Block registration when total user count reaches 100. Expose admin-only `addInviteCode(code: Text): async Result<(), Text>` and `revokeInviteCode(code: Text): async Result<(), Text>` â€” revoking only works on unused codes.",
      "reqIds": [
        "REQ-52"
      ],
      "status": "pending"
    },
    {
      "id": "AR-50",
      "summary": "Implement user registration in backend/main.mo. Expose `register(inviteCode: Text, pseudonym: Text, region: { #India; #Global }): async Result<User, Text>`. Validate invite code validity and capacity cap (100 users). Create user with caller's Principal as id, subscriptionStatus = #grace, subscriptionStartDate = Time.now(), suspended = false. Return the created User record on success or a descriptive error Text on failure. No email or real name stored.",
      "reqIds": [
        "REQ-53"
      ],
      "status": "pending"
    },
    {
      "id": "AR-51",
      "summary": "Implement subscription status logic in backend/main.mo. Add a private helper `getEffectiveStatus(user: User): SubscriptionStatus` that returns #grace if Time.now() - user.subscriptionStartDate < 15 days and stored status is #grace; returns #active if stored status is #active; otherwise returns #expired. Expose `getMySubscriptionStatus(): async Result<SubscriptionStatus, Text>` for the authenticated caller. Expose admin-only `setSubscriptionStatus(userId: Principal, status: SubscriptionStatus): async Result<(), Text>` to manually override status.",
      "reqIds": [
        "REQ-54"
      ],
      "status": "pending"
    },
    {
      "id": "AR-52",
      "summary": "Implement post creation in backend/main.mo. Expose `createPost(emotionType: EmotionType, content: Text): async Result<Post, Text>`. Reject if caller is not registered, is suspended, or has effective subscription status #expired. Enforce server-side word count: #confess and #happy require minimum 24 words; #broke has no minimum. Store post with isPrivate = true, reactionCount = 0, editable = true, createdAt = Time.now(). Generate a unique post id using a monotonic counter.",
      "reqIds": [
        "REQ-55"
      ],
      "status": "pending"
    },
    {
      "id": "AR-53",
      "summary": "Implement post editing in backend/main.mo. Expose `editPost(postId: Text, newContent: Text): async Result<Post, Text>`. Allow edit only if caller is the post owner and editable = true (reactionCount = 0). Apply the same word-count rules as post creation (24-word minimum for #confess and #happy). If reactionCount > 0, return a clear error and do not modify the post.",
      "reqIds": [
        "REQ-56"
      ],
      "status": "pending"
    },
    {
      "id": "AR-54",
      "summary": "Implement privacy toggle in backend/main.mo. Expose `setPostPrivacy(postId: Text, isPrivate: Bool): async Result<Post, Text>`. When going public (isPrivate = false), validate caller is owner, effective subscription is not #expired, and user is not suspended. When making private (isPrivate = true), validate caller is owner only â€” no subscription check needed. Private posts are immediately excluded from all community feed queries. Existing reactionCount is preserved when toggling private.",
      "reqIds": [
        "REQ-57"
      ],
      "status": "pending"
    },
    {
      "id": "AR-55",
      "summary": "Implement the reactions system in backend/main.mo. Expose `addReaction(postId: Text, reactionType: ReactionType): async Result<Reaction, Text>` where ReactionType is variant { #support; #care; #strength }. Only allow reactions on public posts (isPrivate = false). Reject if caller is the post owner, is suspended, or is not registered. Enforce one reaction per user per post â€” return an error if a reaction already exists. On successful reaction: increment post.reactionCount and set post.editable = false. Expose `getMyReaction(postId: Text): async ?ReactionType` for the caller to check their existing reaction.",
      "reqIds": [
        "REQ-58"
      ],
      "status": "pending"
    },
    {
      "id": "AR-56",
      "summary": "Implement post deletion in backend/main.mo. Expose `deletePost(postId: Text): async Result<(), Text>` allowing the post owner to delete their post at any time. Remove all associated reactions from stable state on deletion. No notifications triggered. Expose `adminDeletePost(postId: Text): async Result<(), Text>` protected by admin Principal check, which can delete any post regardless of ownership and also removes associated reactions.",
      "reqIds": [
        "REQ-59"
      ],
      "status": "pending"
    },
    {
      "id": "AR-57",
      "summary": "Implement admin moderation functions in backend/main.mo. Hardcode an admin Principal constant. Expose: `adminGetAllPublicPosts(): async [Post]` (sorted chronologically), `adminGetUserPosts(userId: Principal): async [Post]` (all posts by that user), `adminSuspendUser(userId: Principal): async Result<(), Text>`, `adminUnsuspendUser(userId: Principal): async Result<(), Text>`, `adminGetAllUsers(): async [User]`. Enforce throughout all relevant functions: suspended users cannot create posts, react, or go public.",
      "reqIds": [
        "REQ-60"
      ],
      "status": "pending"
    },
    {
      "id": "AR-58",
      "summary": "Expose all query and update functions required by the existing frontend hooks in frontend/src/hooks/useQueries.ts. At minimum expose: `getMyProfile(): async Result<User, Text>`, `getMyPosts(): async [Post]`, `getPublicPosts(): async [Post]`, `isAdmin(): async Bool`. Ensure all function signatures (parameter types, return types) exactly match what is consumed by the frontend hooks and the auto-generated Candid interface. Do not break any existing frontend data-fetching contracts.",
      "reqIds": [
        "REQ-61"
      ],
      "status": "pending"
    },
    {
      "id": "AR-59",
      "summary": "Update frontend/src/hooks/useQueries.ts to correctly call all backend functions â€” createPost, editPost, deletePost, setPostPrivacy, addReaction, getMyReaction, getMyPosts, getPublicPosts, getMyProfile, isAdmin, register, validateInviteCode, and getMySubscriptionStatus â€” using the actor from useActor. Ensure parameter shapes and return types exactly match the Candid interface generated from backend/main.mo.",
      "reqIds": [
        "REQ-62"
      ],
      "status": "pending"
    },
    {
      "id": "AR-60",
      "summary": "Ensure the SignupPage calls the register mutation from useQueries.ts with the correct (inviteCode, pseudonym, region) arguments, handles #ok and #err Result variants from the backend, and routes to the dashboard on success or displays the backend error message on failure.",
      "reqIds": [
        "REQ-63"
      ],
      "status": "pending"
    },
    {
      "id": "AR-61",
      "summary": "Ensure the PostCreationPage calls the createPost mutation with the correct (emotionType, content) arguments, handles the Result returned by the backend, and navigates to the My Posts page on success or shows the error inline on failure.",
      "reqIds": [
        "REQ-64"
      ],
      "status": "pending"
    },
    {
      "id": "AR-62",
      "summary": "Ensure PostCard calls the editPost, deletePost, and setPostPrivacy mutations with correct arguments, handles Result variants, and invalidates the 'myPosts' and 'publicPosts' query keys on success so the card list updates immediately.",
      "reqIds": [
        "REQ-65"
      ],
      "status": "pending"
    },
    {
      "id": "AR-63",
      "summary": "Ensure PublicPostCard calls the addReaction mutation and getMyReaction query with correct arguments. Display the user's existing reaction if getMyReaction returns a value. Disable reaction buttons for the post owner and for posts on which the user has already reacted.",
      "reqIds": [
        "REQ-66"
      ],
      "status": "pending"
    },
    {
      "id": "AR-64",
      "summary": "Ensure all admin functions (adminGetAllPublicPosts, adminGetUserPosts, adminDeletePost, adminSuspendUser, adminUnsuspendUser, adminGetAllUsers, addInviteCode, revokeInviteCode, setSubscriptionStatus) are exposed as query or mutation hooks in useQueries.ts and correctly consumed by the admin dashboard components (AdminPublicPostsList, AdminUserManagement, AdminInviteCodes, AdminUserPostHistory).",
      "reqIds": [
        "REQ-67"
      ],
      "status": "pending"
    },
    {
      "id": "AR-65",
      "summary": "Ensure the DashboardPage and PostCreationPage read the effective subscription status from the getMySubscriptionStatus query (or getMyProfile) and correctly pass it to the SubscriptionBanner and subscription-gating logic in subscriptionHelpers.ts, so expired users see the calm banner and cannot submit posts or go public.",
      "reqIds": [
        "REQ-68"
      ],
      "status": "pending"
    },
    {
      "id": "AR-66",
      "summary": "Add Internet Identity (or equivalent) authentication so users can have personalized, persistent sessions tied to their Principal identity",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-75",
      "summary": "Verify and fix the Motoko backend (backend/main.mo) to ensure it compiles and correctly implements all required functions with the exact signatures expected by the frontend: register, validateInviteCode, getMyProfile, getMyPosts, getPublicPosts, isAdmin, getMySubscriptionStatus, createPost, editPost, deletePost, setPostPrivacy, addReaction, getMyReaction, adminGetAllPublicPosts, adminGetUserPosts, adminDeletePost, adminSuspendUser, adminUnsuspendUser, adminGetAllUsers, addInviteCode, revokeInviteCode, setSubscriptionStatus. Pre-seed at least 5 invite codes. Use stable var with preupgrade/postupgrade pattern so data survives upgrades.",
      "reqIds": [
        "REQ-85"
      ],
      "status": "pending"
    },
    {
      "id": "AR-76",
      "summary": "Perform a final end-to-end audit of the complete authentication flow: LoginPage must trigger Internet Identity login via useInternetIdentity, check getMyProfile after login, redirect to /dashboard if profile exists or /signup if not. The logout button in Header must call logout from useInternetIdentity and redirect to /login. Unauthenticated users visiting any protected route (/dashboard, /posts, /community, /admin) must be redirected to /login.",
      "reqIds": [
        "REQ-86"
      ],
      "status": "pending"
    },
    {
      "id": "AR-78",
      "summary": "Perform a final audit and fix of the DashboardPage: it must call getMyProfile and getMySubscriptionStatus (or derive status from profile), pass the effective subscription status to SubscriptionBanner, and block navigation to post creation if the user's effective status is #expired. The three emotion buttons (Confess, Broke, Happy) must each navigate to /create with the chosen emotion as a route or query param. No red UI elements; use the muted, supportive subscription banner when status is #expired.",
      "reqIds": [
        "REQ-88"
      ],
      "status": "pending"
    },
    {
      "id": "AR-79",
      "summary": "Perform a final audit and fix of the PostCreationPage: it must read the emotion type from route/query params, call the createPost mutation with (emotionType, content), enforce the 24-word minimum client-side for #confess and #happy (disabling submit if below threshold), handle the Result from the backend, navigate to /posts on success, and show any backend error inline on failure. The subscription-expired gate must block form submission with an inline message.",
      "reqIds": [
        "REQ-89"
      ],
      "status": "pending"
    },
    {
      "id": "AR-80",
      "summary": "Perform a final audit and fix of the MyPostsPage and PostCard: PostCard must call editPost with (postId, newContent), deletePost with (postId), and setPostPrivacy with (postId, isPrivate) using the mutations from useQueries.ts. On success each mutation must invalidate both the 'myPosts' and 'publicPosts' React Query cache keys so the list updates without a manual refresh. The 'Go Public' confirmation dialog must show the exact text 'This post will be visible to all Veil members.' The Edit button must only appear when post.editable is true.",
      "reqIds": [
        "REQ-90"
      ],
      "status": "pending"
    },
    {
      "id": "AR-81",
      "summary": "Perform a final audit and fix of the CommunityFeedPage and PublicPostCard: PublicPostCard must call getMyReaction(postId) to fetch the user's existing reaction and display it highlighted. The addReaction mutation must be called with (postId, reactionType). Reaction buttons must be disabled for the post owner and for any post the user has already reacted to. Posts must be sorted newest-first consistently. No comments, no reply buttons, no follower counts, no popularity indicators.",
      "reqIds": [
        "REQ-91"
      ],
      "status": "pending"
    },
    {
      "id": "AR-82",
      "summary": "Perform a final audit and fix of the AdminPage and all AdminDashboard sub-components. AdminPublicPostsList must call adminGetAllPublicPosts query and adminDeletePost mutation. AdminUserManagement must call adminGetAllUsers query and adminSuspendUser / adminUnsuspendUser / setSubscriptionStatus mutations. AdminInviteCodes must call addInviteCode and revokeInviteCode mutations and list all codes. AdminUserPostHistory must call adminGetUserPosts query by principal. All these hooks must be correctly wired in useQueries.ts and the page must redirect non-admins away.",
      "reqIds": [
        "REQ-92"
      ],
      "status": "pending"
    },
    {
      "id": "AR-83",
      "summary": "Ensure useQueries.ts has complete, correctly-typed hooks for every backend function consumed by the frontend: getMyProfile, getMyPosts, getPublicPosts, isAdmin, getMySubscriptionStatus, getMyReaction, createPost, editPost, deletePost, setPostPrivacy, addReaction, register, validateInviteCode, adminGetAllPublicPosts, adminGetUserPosts, adminDeletePost, adminSuspendUser, adminUnsuspendUser, adminGetAllUsers, addInviteCode, revokeInviteCode, setSubscriptionStatus. All parameter shapes and return types must match the Candid interface generated from backend/main.mo. All mutation hooks must call queryClient.invalidateQueries with the correct cache keys on success.",
      "reqIds": [
        "REQ-93"
      ],
      "status": "pending"
    },
    {
      "id": "AR-84",
      "summary": "Verify and fix backend/main.mo to ensure it compiles correctly and implements all required public functions with the exact signatures expected by the frontend: register, validateInviteCode, getMyProfile, getMyPosts, getPublicPosts, isAdmin, getMySubscriptionStatus, createPost, editPost, deletePost, setPostPrivacy, addReaction, getMyReaction, adminGetAllPublicPosts, adminGetUserPosts, adminDeletePost, adminSuspendUser, adminUnsuspendUser, adminGetAllUsers, addInviteCode, revokeInviteCode, setSubscriptionStatus. Pre-seed at least 5 invite codes. Use stable var with preupgrade/postupgrade pattern so data survives upgrades.",
      "reqIds": [
        "REQ-94"
      ],
      "status": "pending"
    },
    {
      "id": "AR-85",
      "summary": "Verify and fix backend/main.mo to ensure it compiles correctly and implements all required public functions with the exact signatures expected by the frontend: register, validateInviteCode, getMyProfile, getMyPosts, getPublicPosts, isAdmin, getMySubscriptionStatus, createPost, editPost, deletePost, setPostPrivacy, addReaction, getMyReaction, adminGetAllPublicPosts, adminGetUserPosts, adminDeletePost, adminSuspendUser, adminUnsuspendUser, adminGetAllUsers, addInviteCode, revokeInviteCode, setSubscriptionStatus. Pre-seed at least 5 invite codes. Use stable var with preupgrade/postupgrade pattern so data survives canister upgrades.",
      "reqIds": [
        "REQ-95"
      ],
      "status": "pending"
    },
    {
      "id": "AR-86",
      "summary": "Ensure useQueries.ts has complete, correctly-typed hooks for every backend function consumed by the frontend: getMyProfile, getMyPosts, getPublicPosts, isAdmin, getMySubscriptionStatus, getMyReaction, createPost, editPost, deletePost, setPostPrivacy, addReaction, register, validateInviteCode, adminGetAllPublicPosts, adminGetUserPosts, adminDeletePost, adminSuspendUser, adminUnsuspendUser, adminGetAllUsers, addInviteCode, revokeInviteCode, setSubscriptionStatus. All parameter shapes and return types must match the Candid interface generated from backend/main.mo. All mutation hooks must call queryClient.invalidateQueries with the correct cache keys on success.",
      "reqIds": [
        "REQ-96"
      ],
      "status": "pending"
    },
    {
      "id": "AR-87",
      "summary": "Audit and fix the complete authentication flow: LoginPage must trigger Internet Identity login via useInternetIdentity, check getMyProfile after login, redirect to /dashboard if profile exists or /signup if not. The logout button in Header must call logout from useInternetIdentity and redirect to /login. Unauthenticated users visiting any protected route (/dashboard, /posts, /community, /admin) must be redirected to /login.",
      "reqIds": [
        "REQ-97"
      ],
      "status": "pending"
    },
    {
      "id": "AR-88",
      "summary": "Audit and fix the SignupPage: it must read the invite code from URL params (if present) via urlParams.ts, call the register mutation from useQueries.ts with (inviteCode, pseudonym, region) arguments, correctly unwrap #ok and #err Result variants from the backend, route to /dashboard on success, and display the backend error text inline (not in a modal) on failure. The region selector must offer exactly 'India' and 'Global' options.",
      "reqIds": [
        "REQ-98"
      ],
      "status": "pending"
    },
    {
      "id": "AR-89",
      "summary": "Audit and fix the DashboardPage: it must call getMyProfile and getMySubscriptionStatus (or derive status from profile), pass the effective subscription status to SubscriptionBanner, and block navigation to post creation if the user's effective status is #expired. The three emotion buttons (Confess, Broke, Happy) must each navigate to /create with the chosen emotion as a query param. No red UI elements; use the muted, supportive subscription banner when status is #expired.",
      "reqIds": [
        "REQ-99"
      ],
      "status": "pending"
    },
    {
      "id": "AR-90",
      "summary": "Audit and fix the PostCreationPage: it must read the emotion type from route/query params, call the createPost mutation with (emotionType, content), enforce the 24-word minimum client-side for #confess and #happy (disabling submit if below threshold), handle the Result from the backend, navigate to /posts on success, and show any backend error inline on failure. The subscription-expired gate must block form submission with an inline message.",
      "reqIds": [
        "REQ-100"
      ],
      "status": "pending"
    },
    {
      "id": "AR-91",
      "summary": "Audit and fix the MyPostsPage and PostCard: PostCard must call editPost with (postId, newContent), deletePost with (postId), and setPostPrivacy with (postId, isPrivate) using the mutations from useQueries.ts. On success each mutation must invalidate both the 'myPosts' and 'publicPosts' React Query cache keys so the list updates without a manual refresh. The 'Go Public' confirmation dialog must show the exact text 'This post will be visible to all Veil members.' The Edit button must only appear when post.editable is true.",
      "reqIds": [
        "REQ-101"
      ],
      "status": "pending"
    },
    {
      "id": "AR-92",
      "summary": "Audit and fix the CommunityFeedPage and PublicPostCard: PublicPostCard must call getMyReaction(postId) to fetch the user's existing reaction and display it highlighted. The addReaction mutation must be called with (postId, reactionType). Reaction buttons must be disabled for the post owner and for any post the user has already reacted to. Posts must be sorted newest-first consistently. No comments, no reply buttons, no follower counts, no popularity indicators.",
      "reqIds": [
        "REQ-102"
      ],
      "status": "pending"
    },
    {
      "id": "AR-93",
      "summary": "Audit and fix the AdminPage and all AdminDashboard sub-components. AdminPublicPostsList must call adminGetAllPublicPosts query and adminDeletePost mutation. AdminUserManagement must call adminGetAllUsers query and adminSuspendUser / adminUnsuspendUser / setSubscriptionStatus mutations. AdminInviteCodes must call addInviteCode and revokeInviteCode mutations and list all codes. AdminUserPostHistory must call adminGetUserPosts query by principal. All these hooks must be correctly wired in useQueries.ts and the page must redirect non-admins away.",
      "reqIds": [
        "REQ-103"
      ],
      "status": "pending"
    },
    {
      "id": "AR-94",
      "summary": "Verify and fix backend/main.mo so it compiles correctly and exposes all required public functions with exact signatures matching the frontend Candid interface: register, validateInviteCode, getMyProfile, getMyPosts, getPublicPosts, isAdmin, getMySubscriptionStatus, createPost, editPost, deletePost, setPostPrivacy, addReaction, getMyReaction, adminGetAllPublicPosts, adminGetUserPosts, adminDeletePost, adminSuspendUser, adminUnsuspendUser, adminGetAllUsers, addInviteCode, revokeInviteCode, setSubscriptionStatus. Pre-seed at least 5 invite codes. Use stable var with preupgrade/postupgrade pattern so data survives canister upgrades.",
      "reqIds": [
        "REQ-104"
      ],
      "status": "pending"
    },
    {
      "id": "AR-95",
      "summary": "Ensure useQueries.ts has complete, correctly-typed React Query hooks for every backend function consumed by the frontend: getMyProfile, getMyPosts, getPublicPosts, isAdmin, getMySubscriptionStatus, getMyReaction, createPost, editPost, deletePost, setPostPrivacy, addReaction, register, validateInviteCode, adminGetAllPublicPosts, adminGetUserPosts, adminDeletePost, adminSuspendUser, adminUnsuspendUser, adminGetAllUsers, addInviteCode, revokeInviteCode, setSubscriptionStatus. All parameter shapes and return types must exactly match the Candid interface generated from backend/main.mo. All mutation hooks must call queryClient.invalidateQueries with the correct cache keys on success.",
      "reqIds": [
        "REQ-105"
      ],
      "status": "pending"
    },
    {
      "id": "AR-96",
      "summary": "Audit and fix the LoginPage: it must call the login function from useInternetIdentity on button click, then check getMyProfile after authentication, redirect to /dashboard if a profile exists, or redirect to /signup if no profile is found. Unauthenticated users visiting any protected route (/dashboard, /posts, /community, /admin) must be redirected to /login. The logout button in Header must call logout from useInternetIdentity and redirect to /login.",
      "reqIds": [
        "REQ-106"
      ],
      "status": "pending"
    },
    {
      "id": "AR-97",
      "summary": "Audit and fix the SignupPage: it must read the invite code from URL params (if present) via urlParams.ts, pre-fill the invite code input, call the register mutation from useQueries.ts with (inviteCode, pseudonym, region) arguments, correctly unwrap #ok and #err Result variants from the backend, route to /dashboard on success, and display the backend error text inline (not in a modal) on failure. The region selector must offer exactly 'India' and 'Global' options.",
      "reqIds": [
        "REQ-107"
      ],
      "status": "pending"
    },
    {
      "id": "AR-98",
      "summary": "Audit and fix the DashboardPage: it must call getMyProfile and getMySubscriptionStatus (or derive status from profile), pass the effective subscription status to SubscriptionBanner, and block navigation to /create if the user's effective status is #expired. The three emotion buttons (Confess, Broke, Happy) must each navigate to /create with the chosen emotion passed as a query parameter. No red UI elements; use the muted, supportive SubscriptionBanner when status is #expired.",
      "reqIds": [
        "REQ-108"
      ],
      "status": "pending"
    },
    {
      "id": "AR-99",
      "summary": "Audit and fix the PostCreationPage: it must read the emotion type from route/query params, call the createPost mutation with (emotionType, content), enforce the 24-word minimum client-side for #confess and #happy (disabling the submit button if below threshold), handle the Result from the backend, navigate to /posts on success, and show any backend error inline on failure. The subscription-expired gate must block form submission with an inline message.",
      "reqIds": [
        "REQ-109"
      ],
      "status": "pending"
    },
    {
      "id": "AR-100",
      "summary": "Audit and fix the MyPostsPage and PostCard: PostCard must call editPost with (postId, newContent), deletePost with (postId), and setPostPrivacy with (postId, isPrivate) using mutations from useQueries.ts. On success each mutation must invalidate both the 'myPosts' and 'publicPosts' React Query cache keys so the list updates without a manual refresh. The 'Go Public' confirmation dialog must show the exact text 'This post will be visible to all Veil members.' The Edit button must only appear when post.editable is true.",
      "reqIds": [
        "REQ-110"
      ],
      "status": "pending"
    },
    {
      "id": "AR-101",
      "summary": "Audit and fix the CommunityFeedPage and PublicPostCard: PublicPostCard must call getMyReaction(postId) to fetch the user's existing reaction and display it highlighted. The addReaction mutation must be called with (postId, reactionType). Reaction buttons (Support, Care, Strength) must be disabled for the post owner and for any post the user has already reacted to. Posts must be sorted newest-first consistently. No comments, no reply buttons, no follower counts, no popularity indicators.",
      "reqIds": [
        "REQ-111"
      ],
      "status": "pending"
    },
    {
      "id": "AR-102",
      "summary": "Audit and fix the AdminPage and all AdminDashboard sub-components. AdminPublicPostsList must call adminGetAllPublicPosts query and adminDeletePost mutation. AdminUserManagement must call adminGetAllUsers query and adminSuspendUser, adminUnsuspendUser, setSubscriptionStatus mutations. AdminInviteCodes must call addInviteCode and revokeInviteCode mutations and list all codes with their used/unused status. AdminUserPostHistory must call adminGetUserPosts query by principal. All hooks must be correctly wired in useQueries.ts. The AdminPage must redirect non-admin users away from /admin.",
      "reqIds": [
        "REQ-112"
      ],
      "status": "pending"
    },
    {
      "id": "AR-103",
      "summary": "Audit and fix the invite code pre-seeding in backend/main.mo. The codes VEIL-001, VEIL-002, VEIL-003, VEIL-004, and VEIL-005 must be present and valid in the InviteCodes stable state immediately after canister deployment or upgrade. Ensure the seeding logic runs in the actor's initialization (or postupgrade hook) so codes are never absent on a fresh deploy. Verify that validateInviteCode returns true for each of these codes before they are used, and that the register function correctly marks them as used upon successful registration.",
      "reqIds": [
        "REQ-113"
      ],
      "status": "pending"
    },
    {
      "id": "AR-104",
      "summary": "Fix the invite code seeding in backend/main.mo so that codes VEIL-001, VEIL-002, VEIL-003, VEIL-004, and VEIL-005 are guaranteed to exist in the InviteCodes stable state as unused codes immediately after any fresh deployment or canister upgrade. The seeding must run in both the actor's init block (for fresh deploys) and the postupgrade hook (for upgrades), but must NOT overwrite a code that is already marked as used â€” only add the code if it is absent. After seeding, validateInviteCode must return true for each unused VEIL code.",
      "reqIds": [
        "REQ-115"
      ],
      "status": "pending"
    },
    {
      "id": "AR-105",
      "summary": "Fix the 'Already registered' error that occurs when a user attempts to register with a valid VEIL invite code. Investigate and resolve the root cause: if a stale or anonymous Principal is being stored as a registered user (e.g., from a previous failed registration attempt or canister state from an earlier build), add a guard in the register function to detect and reject duplicate registrations only for the same authenticated Principal â€” not for a fresh Principal using a new code. If the issue is caused by a stored anonymous or test principal colliding with the caller, add a migration step in migration.mo or postupgrade to clean up any user entries whose Principal is the anonymous principal (aaaaa-aa) or any other obviously invalid/test principal.",
      "reqIds": [
        "REQ-116"
      ],
      "status": "pending"
    },
    {
      "id": "AR-106",
      "summary": "Write a migration.mo (or update the existing one) that, during the postupgrade hook, performs two cleanup steps: (1) removes any user entries keyed to the anonymous principal or any principal that is obviously a placeholder/test value, and (2) re-seeds any VEIL invite codes (VEIL-001 through VEIL-005) that are absent from the InviteCodes map. This ensures both fresh and previously-upgraded canisters reach a valid state where real users can register.",
      "reqIds": [
        "REQ-117"
      ],
      "status": "pending"
    },
    {
      "id": "AR-107",
      "summary": "Fix the 'Admin not initialized' error in backend/main.mo. Audit the admin Principal constant declaration and any initialization logic. Ensure the hardcoded admin Principal constant is set to the correct deployed canister controller/admin identity and is accessible at actor initialization time â€” not lazily or conditionally. The admin Principal must be a compile-time or stable constant, not derived from a mutable state variable that could be unset. All admin guard checks (isAdmin, adminGetAllPublicPosts, adminGetAllUsers, adminSuspendUser, adminUnsuspendUser, adminDeletePost, adminGetUserPosts, addInviteCode, revokeInviteCode, setSubscriptionStatus) must use this constant directly. The `isAdmin()` public query must return true for calls from that Principal and false for all others â€” it must never throw or return an error due to an uninitialized state.",
      "reqIds": [
        "REQ-118"
      ],
      "status": "pending"
    },
    {
      "id": "AR-108",
      "summary": "Write or update backend/migration.mo to ensure that on every postupgrade: (1) any user entries keyed to the anonymous principal (aaaaa-aa) are removed from the users stable map, and (2) invite codes VEIL-001 through VEIL-005 are re-seeded as unused if they are absent from the InviteCodes map (without overwriting codes already marked as used). This brings any previously-upgraded canister to a valid state without wiping legitimate user data.",
      "reqIds": [
        "REQ-119"
      ],
      "status": "pending"
    },
    {
      "id": "AR-109",
      "summary": "Fix the admin Principal constant in backend/main.mo so it is a hardcoded compile-time constant â€” never lazy, never derived from mutable state. All admin guard checks (isAdmin, adminGetAllPublicPosts, adminGetAllUsers, adminSuspendUser, adminUnsuspendUser, adminDeletePost, adminGetUserPosts, addInviteCode, revokeInviteCode, setSubscriptionStatus) must reference this constant directly. The public query isAdmin() must return true for that Principal and false for all others without throwing or returning an error under any circumstances, including on a freshly deployed canister with no prior state.",
      "reqIds": [
        "REQ-120"
      ],
      "status": "pending"
    },
    {
      "id": "AR-110",
      "summary": "Fix invite code seeding in backend/main.mo so that codes VEIL-001, VEIL-002, VEIL-003, VEIL-004, and VEIL-005 are guaranteed to exist as unused entries in the InviteCodes stable map immediately after any fresh deployment or canister upgrade. Seeding must run in both the actor's initialization block (for fresh deploys) and in the postupgrade hook (for upgrades). Seeding must only insert a code if it is absent â€” it must never overwrite a code that already exists (whether used or unused). After seeding, validateInviteCode must return true for each of these codes while they remain unused.",
      "reqIds": [
        "REQ-121"
      ],
      "status": "pending"
    },
    {
      "id": "AR-111",
      "summary": "Update backend/migration.mo (or create it if absent) to perform the following cleanup steps during the postupgrade hook: (1) Remove any user entries from the users stable map whose Principal is the anonymous principal (2vxsx-fae / aaaaa-aa) or any other obviously invalid placeholder Principal. (2) Re-seed invite codes VEIL-001 through VEIL-005 as unused entries if they are absent from the InviteCodes map â€” without overwriting any code that is already present. This ensures both fresh and previously-upgraded canisters reach a valid state where real users can register without hitting a spurious 'Already registered' error.",
      "reqIds": [
        "REQ-122"
      ],
      "status": "pending"
    },
    {
      "id": "AR-112",
      "summary": "Perform a final compile-time audit of backend/main.mo to confirm it compiles without errors and correctly exposes all required public functions with the exact signatures expected by the frontend Candid interface: register, validateInviteCode, getMyProfile, getMyPosts, getPublicPosts, isAdmin, getMySubscriptionStatus, createPost, editPost, deletePost, setPostPrivacy, addReaction, getMyReaction, adminGetAllPublicPosts, adminGetUserPosts, adminDeletePost, adminSuspendUser, adminUnsuspendUser, adminGetAllUsers, addInviteCode, revokeInviteCode, setSubscriptionStatus. Use the stable var with preupgrade/postupgrade pattern for all collections so data survives canister upgrades.",
      "reqIds": [
        "REQ-123"
      ],
      "status": "pending"
    },
    {
      "id": "AR-113",
      "summary": "Audit every location in backend/main.mo where a Principal value is converted to a blob or compared using Principal-related operations (e.g. Principal.toBlob, Principal.fromText, Principal.equal, HashMap keyed by Principal). Ensure that no anonymous principal, empty string, or otherwise invalid principal value is ever passed to these operations. Specifically: (1) In the register function, add a guard at the top that returns an error if caller is the anonymous principal (Principal.isAnonymous(caller)); (2) In every admin guard, reaction handler, post creation handler, and any other function that resolves the caller's user record, check Principal.isAnonymous(caller) before any lookup or blob conversion and return an appropriate error; (3) In the migration/postupgrade hook, skip or remove any user entries whose key principal is anonymous or invalid before iterating over them. This eliminates the 'RTS error: blob_of_principal: invalid principal' crash.",
      "reqIds": [
        "REQ-124"
      ],
      "status": "pending"
    },
    {
      "id": "AR-114",
      "summary": "Update backend/migration.mo so that the postupgrade cleanup step safely handles any stored user entries whose Principal key is the anonymous principal or any invalid principal. Before calling Principal.toBlob or any Principal comparison on a stored key, validate the key is non-anonymous. Remove invalid entries without trapping. Re-seed invite codes VEIL-001 through VEIL-005 as unused if absent, as before.",
      "reqIds": [
        "REQ-125"
      ],
      "status": "pending"
    },
    {
      "id": "AR-115",
      "summary": "In backend/main.mo, audit every location where a Principal value is used in a blob conversion, equality check, or as a HashMap/TrieMap key. Add a guard using Principal.isAnonymous(caller) at the very top of every public function (register, createPost, editPost, deletePost, setPostPrivacy, addReaction, getMyReaction, getMyProfile, getMyPosts, getMySubscriptionStatus, and all admin functions) so that if the caller is anonymous, the function returns an immediate error result or false rather than proceeding. This prevents the 'RTS error: blob_of_principal: invalid principal' trap that occurs when an anonymous principal is passed to Principal.toBlob or related operations.",
      "reqIds": [
        "REQ-127"
      ],
      "status": "pending"
    },
    {
      "id": "AR-116",
      "summary": "In backend/migration.mo, update the postupgrade cleanup step so that when iterating over stored user entries, each Principal key is checked with Principal.isAnonymous before any Principal.toBlob or comparison operation. Any entry whose key is the anonymous principal must be silently removed without trapping. The invite code re-seeding for VEIL-001 through VEIL-005 must also proceed safely after this cleanup.",
      "reqIds": [
        "REQ-128"
      ],
      "status": "pending"
    },
    {
      "id": "AR-117",
      "summary": "In backend/main.mo, add a Principal.isAnonymous(caller) guard at the very top of every public function â€” register, createPost, editPost, deletePost, setPostPrivacy, addReaction, getMyReaction, getMyProfile, getMyPosts, getMySubscriptionStatus, validateInviteCode, isAdmin, and all admin functions (adminGetAllPublicPosts, adminGetUserPosts, adminDeletePost, adminSuspendUser, adminUnsuspendUser, adminGetAllUsers, addInviteCode, revokeInviteCode, setSubscriptionStatus) â€” so that if the caller is the anonymous principal, the function immediately returns an error result, false, or empty array as appropriate, without proceeding to any Principal.toBlob, HashMap lookup, or other Principal operation. This eliminates the 'RTS error: blob_of_principal: invalid principal' trap.",
      "reqIds": [
        "REQ-130"
      ],
      "status": "pending"
    },
    {
      "id": "AR-118",
      "summary": "In backend/main.mo, audit every location where a stored Principal value (from HashMap or TrieMap keys or user records) is passed to Principal.toBlob, Principal.equal, or used in any comparison or hash operation. Add a defensive check before each such operation: if the stored value is anonymous or otherwise invalid, skip or remove that entry rather than trapping. This applies especially in any iteration over the users map (e.g., in getPublicPosts, getMyPosts, adminGetAllUsers, adminGetUserPosts) and in the preupgrade/postupgrade hooks.",
      "reqIds": [
        "REQ-131"
      ],
      "status": "pending"
    },
    {
      "id": "AR-119",
      "summary": "In backend/migration.mo, update the postupgrade cleanup hook so that when iterating over all stored user entries, each Principal key is validated with Principal.isAnonymous before any Principal.toBlob or comparison operation is performed on it. Any entry whose key is the anonymous principal must be silently removed without trapping. The invite code re-seeding for VEIL-001 through VEIL-005 must proceed safely after this cleanup, inserting each code only if it is absent from the InviteCodes map.",
      "reqIds": [
        "REQ-132"
      ],
      "status": "pending"
    },
    {
      "id": "AR-120",
      "summary": "In backend/main.mo, add a Principal.isAnonymous(caller) guard at the very top of every public function â€” register, createPost, editPost, deletePost, setPostPrivacy, addReaction, getMyReaction, getMyProfile, getMyPosts, getMySubscriptionStatus, validateInviteCode, isAdmin, and all admin functions (adminGetAllPublicPosts, adminGetUserPosts, adminDeletePost, adminSuspendUser, adminUnsuspendUser, adminGetAllUsers, addInviteCode, revokeInviteCode, setSubscriptionStatus) â€” so that if the caller is the anonymous principal, the function immediately returns an appropriate early exit (error result, false, or empty array) without proceeding to any Principal.toBlob, HashMap lookup, or other Principal operation. This eliminates the 'RTS error: blob_of_principal: invalid principal' trap.",
      "reqIds": [
        "REQ-134"
      ],
      "status": "pending"
    },
    {
      "id": "AR-121",
      "summary": "In backend/main.mo, audit every location where a stored Principal value (from HashMap or TrieMap keys or user record fields) is passed to Principal.toBlob, Principal.equal, or used in any comparison or hash operation during iteration (e.g., in getPublicPosts, adminGetAllUsers, adminGetUserPosts, preupgrade/postupgrade hooks). Before each such operation on a stored key or value, check whether the principal is anonymous; if it is, skip or remove that entry rather than trapping.",
      "reqIds": [
        "REQ-135"
      ],
      "status": "pending"
    },
    {
      "id": "AR-122",
      "summary": "In backend/migration.mo, update the postupgrade cleanup hook so that when iterating over all stored user entries, each Principal key is validated with Principal.isAnonymous before any Principal.toBlob or comparison operation is performed on it. Any entry whose key is the anonymous principal must be silently removed without trapping. The invite code re-seeding for VEIL-001 through VEIL-005 must proceed safely after this cleanup, inserting each code only if it is absent from the InviteCodes map.",
      "reqIds": [
        "REQ-136"
      ],
      "status": "pending"
    },
    {
      "id": "AR-123",
      "summary": "Add a backend function `adminRegister(pseudonym: Text, region: { #India; #Global }): async Result<User, Text>` that allows the admin principal to create an account without providing an invite code. This function must check that the caller is the admin principal, verify the 100-member capacity cap is not reached, create a user record with subscriptionStatus = #grace, subscriptionStartDate = Time.now(), suspended = false, and inviteCode = 'ADMIN_BYPASS'. Return the created User on success or a descriptive error on failure.",
      "reqIds": [
        "REQ-138"
      ],
      "status": "pending"
    },
    {
      "id": "AR-124",
      "summary": "Audit and fix the LoginPage authentication flow so that when a user successfully authenticates via Internet Identity and already has a registered profile (getMyProfile returns #ok), they are redirected directly to /dashboard without ever being shown the SignupPage or an invite code prompt. The invite code input on the SignupPage must only be shown to users who do NOT yet have a profile â€” i.e., users who authenticated but whose getMyProfile returns #err or null.",
      "reqIds": [
        "REQ-140"
      ],
      "status": "pending"
    },
    {
      "id": "AR-125",
      "summary": "Remove the invite code requirement from the signup/login flow. Users must be able to register and log in without providing an invite code. The invite code input field should be removed from the SignupPage. The backend register function should not require or validate an invite code for new registrations.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-126",
      "summary": "Update the backend register function in backend/main.mo to remove the invite code parameter entirely. The new signature must be: `register(pseudonym: Text, region: { #India; #Global }): async Result<User, Text>`. Remove all invite code validation logic from the registration path â€” do not check, consume, or require an invite code to create an account. Still enforce the 100-member capacity cap and the anonymous principal guard. Return the created User record on success or a descriptive error on failure.",
      "reqIds": [
        "REQ-141"
      ],
      "status": "pending"
    },
    {
      "id": "AR-127",
      "summary": "In backend/main.mo, perform a comprehensive audit of every public function and every internal iteration over stored Principal values. Add a Principal.isAnonymous(caller) guard at the absolute top of every public function (register, createPost, editPost, deletePost, setPostPrivacy, addReaction, getMyReaction, getMyProfile, getMyPosts, getMySubscriptionStatus, validateInviteCode, isAdmin, adminGetAllPublicPosts, adminGetUserPosts, adminDeletePost, adminSuspendUser, adminUnsuspendUser, adminGetAllUsers, addInviteCode, revokeInviteCode, setSubscriptionStatus, and adminRegister) so that any call from an anonymous principal returns an immediate safe exit (error result, false, or empty array) before any Principal.toBlob, HashMap lookup, or other Principal operation is attempted. Additionally, audit every iteration over the users, posts, and reactions maps where stored Principal keys or values are passed to Principal.toBlob or Principal.equal â€” add a defensive isAnonymous check before each such operation and skip/remove any anonymous entry rather than trapping.",
      "reqIds": [
        "REQ-144"
      ],
      "status": "pending"
    },
    {
      "id": "AR-128",
      "summary": "In backend/migration.mo, update the postupgrade cleanup hook so that when iterating over all stored entries in the users map, each Principal key is checked with Principal.isAnonymous before any Principal.toBlob, Principal.equal, or HashMap/TrieMap operation is performed on it. Any entry whose key is the anonymous principal must be silently removed without trapping. After this cleanup, re-seed invite codes VEIL-001 through VEIL-005 as unused entries only if they are absent from the InviteCodes map â€” never overwriting existing entries.",
      "reqIds": [
        "REQ-145"
      ],
      "status": "pending"
    }
  ],
  "gameProjectType": "none",
  "projectName": "Veil",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}